<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:dlg="http://xmlns.jcp.org/jsf/composite/dialog">
    <ui:define name="head">
        <!--<script src="../../resources/pfJs/keyPress.js" type="text/javascript"></script>-->
    </ui:define>
    <ui:define name="content">
        <div align="center">
            <h2>Gestion de predios</h2>
        </div>
        <h:form id="frmMain">

<!--            <div align="center">
                <p:panelGrid layout="grid" columns="2" style="width: 40%" rendered="#{fichaPredial.editable and appConfig.mainConfig.fichaPredial.mostrarPorcentajeEdificacion}">
                    <h:outputText value="Propiedad Horizontal"/>
                    <p:inputSwitch value="#{gestionFicha.ph}" offLabel="No" onLabel="Si" label="Propiedad Horizontal">
                        <p:ajax listener="#{gestionFicha.habPh()}" update="frmMain"/>
                    </p:inputSwitch>
                    <f:facet name="footer">
                        <div align="center">
                            <p:commandButton id="btnBuscarMatriz" value="Buscar Matriz" actionListener="#{gestionFicha.listarPredios()}" style="font-size: 15px; font-weight: bolder;" styleClass="btnStyle" icon="ui-icon-search" iconPos="right" rendered="#{gestionFicha.busqueda}">
                                <p:ajax event="dialogReturn" listener="#{gestionFicha.seleccionarPredio}" update="frmMain,:frmPh" oncomplete="PF('dlgph').show()"/>
                            </p:commandButton>
                        </div>
                    </f:facet>
                </p:panelGrid>
            </div>-->
            <p:panel id="pnormal" header="Datos Prediales" style="width: 100%">
<!--                <p:panelGrid layout="grid" columns="4" style="width: 100%">
                    <h:outputText value="Matricula Inmobiliaria" style="font-weight: bolder"/>
                    <h:outputText value="#{gestionFicha.predio.numPredio}" re/>
                    <h:outputText value="Ficha Registral " style="font-weight: bolder"/>
                    <p:inputText type="number" value="#{gestionFicha.predio.numeroFicha}"/>
                </p:panelGrid>-->
<!--                <p:dataList value="#{gestionFicha.parroquias}" var="pq1" paginatorAlwaysVisible="false" paginatorPosition="top"
                            paginator="true" rows="8">
                    <f:facet name="header">
                        Descripcion de Codigo de Parroquias
                    </f:facet>
                    #{pq1.codigoParroquia}, #{pq1.descripcion}
                </p:dataList>-->
                <p:fieldset legend="Codigo Catastral" toggleable="true">

                    <p:panelGrid style="margin-top:20px">
                        <f:facet name="header">
                            <p:row>
                                <p:column> <p:outputLabel for="provincia"  value="Provincia" styleClass="DispBlock Wid100" style="font-weight: bolder"/> </p:column>
                                <p:column> <p:outputLabel for="canton"  value="Cantón" styleClass="DispBlock Wid100" style="font-weight: bolder"/> </p:column>
                                <p:column> <p:outputLabel for="parroquia"  value="Parroquia" styleClass="DispBlock Wid100" style="font-weight: bolder"/> </p:column>
                                <p:column> <p:outputLabel for="zona"  value="Zona" styleClass="DispBlock Wid100" style="font-weight: bolder"/> </p:column>
                                <p:column> <p:outputLabel for="sector"  value="Sector" styleClass="DispBlock Wid100" style="font-weight: bolder"/> </p:column>
                                <p:column> <p:outputLabel for="mz"  value="Mz" styleClass="DispBlock Wid100" style="font-weight: bolder"/> </p:column>
                                <p:column> <p:outputLabel for="lote"  value="Lote" styleClass="DispBlock Wid100" style="font-weight: bolder"/> </p:column>
<!--                                <p:column> <p:outputLabel value="Bloque"  style="font-weight: bolder"/> </p:column>
                                <p:column> <p:outputLabel value="Piso" style="font-weight: bolder"/> </p:column>
                                <p:column> <p:outputLabel value="Unidad" style="font-weight: bolder"/> </p:column>-->
                            </p:row>
                        </f:facet>
                        <p:row>
                            <p:column>
                                <p:inputText id="provincia" placeholder="00" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="provincia : #{gestionFicha.predio.provincia}" maxlength="2" value="#{gestionFicha.predio.provincia}" style="text-align: center; width: 86%"  required="true"/>
                            </p:column>
                            <p:column>
                                <p:inputText id="canton" placeholder="00" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="Canton : #{gestionFicha.predio.canton}" maxlength="2" value="#{gestionFicha.predio.canton}" style="text-align: center; width: 86%"  required="true" />
                            </p:column>
                            <p:column>
                                <p:inputText id="parroquia" placeholder="00" onkeypress="validateIntegerValueAndFocusNext(event, '')"    title="Parroquia : #{gestionFicha.predio.parroquia}" maxlength="2" value="#{gestionFicha.predio.parroquia}" style="text-align: center; width: 86%"  required="true" />
                            </p:column>
                            <p:column>
                                <p:inputText id="zona" placeholder="0" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="Zona : #{gestionFicha.predio.zona}" maxlength="2" value="#{gestionFicha.predio.zona}"  style="text-align: center; width: 86%" required="true"/>
                            </p:column>
                            <p:column >
                                <p:inputText id="sector" placeholder="0" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="Sector : #{gestionFicha.predio.sector}" maxlength="2" value="#{gestionFicha.predio.sector}"  style="text-align: center; width: 86%" required="true" >
                                </p:inputText>
                            </p:column>                           
                            <p:column>
                                <p:inputText id="mz" placeholder="000" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="Mz : #{gestionFicha.predio.mz}" maxlength="3" value="#{gestionFicha.predio.mz}"  style="text-align: center; width: 86%" required="true"/>
                            </p:column>
                            <p:column>
                                <p:inputText id="lote" placeholder="000" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="Lote : #{gestionFicha.predio.solar}" maxlength="3"  value="#{gestionFicha.predio.solar}" style="text-align: center; width: 86%" required="true" />
                            </p:column>
<!--                            <p:column>
                                <p:inputText id="bloque" placeholder="000" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="Bloque : #{gestionFicha.predio.bloque}"  maxlength="3" value="#{gestionFicha.predio.bloque}" style="text-align: center; width: 86%"/>
                            </p:column>
                            <p:column>
                                <p:inputText id="piso" placeholder="00" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="Piso : #{gestionFicha.predio.piso}"  maxlength="2" value="#{gestionFicha.predio.piso}"  style="text-align: center; width: 86%"/>
                            </p:column>
                            <p:column>
                                <p:inputText id="Unidad" placeholder="000" onkeypress="validateIntegerValueAndFocusNext(event, '')"   title="Unidad : #{gestionFicha.predio.unidad}"  maxlength="3" value="#{gestionFicha.predio.unidad}" style="text-align: center; width: 86%" />
                            </p:column>-->
                        </p:row>
                    </p:panelGrid>
                </p:fieldset>
                <p:fieldset legend="Datos Complementarios" toggleable="true">
                    <p:panelGrid layout="grid" columns="4" style="width: 100%">
                        <p:outputLabel for="tipoPredio"  value="Tipo Predio" styleClass="DispBlock Wid100" style="font-weight: bolder"/>
                        <p:selectOneMenu id="tipoPredio" value="#{gestionFicha.predio.tipoPredio}" required="true" effect="fade" >
                            <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                            <f:selectItem itemLabel="Urbano" itemValue="U"/>
                            <f:selectItem itemLabel="Rural" itemValue="R"/>
                        </p:selectOneMenu>
                        <p:outputLabel for="predio_tipo"  value="Espacio Urbano :" styleClass="DispBlock Wid100" style="font-weight: bolder"/>
                        <p:selectOneMenu id="predio_tipo" value="#{gestionFicha.predio.tipoConjunto}" required="true" effect="fade" converter="entityConverter">
                            <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                            <f:selectItems value="#{serviceLists.tiposConjunto}" var="tconj" itemLabel="#{tconj.nombre}" itemValue="#{tconj}"/>
                            <p:ajax update=":frmMain:ciudadela" />
                        </p:selectOneMenu>
                        <p:outputLabel for="ciudadela" value="Ciudadela/Urbanización" styleClass="DispBlock Wid100" />
                        <p:selectOneMenu id="ciudadela" value="#{gestionFicha.predio.ciudadela}" effect="fade" required="true" converter="entityConverter" filter="true" filterMatchMode="contains">
                            <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                            <f:selectItems value="#{serviceLists.getCiudadelas(fichaPredial.predio.tipoConjunto)}" var="cx" itemLabel="#{cx.nombre}" itemValue="#{cx}"/>
                        </p:selectOneMenu>
                        <h:outputText value="Nombre Predio"/>
                        <p:inputText id="secUrb" value="#{gestionFicha.predio.nombreEdificio}" />
                    </p:panelGrid>
                </p:fieldset>

                <div align="center">
                    <p:commandButton value="Guardar" style="font-size: 15px; font-weight: bolder;"
                                     styleClass="btnStyle" icon="ui-icon-disk" type="submit"
                                     actionListener="#{gestionFicha.registrar()}" update=":frmMain :frmEstatus" />
                </div>

            </p:panel>
        </h:form>
        <p:dialog id="dlgMatricula" widgetVar="dlgMatricula" header="Matricula inmobiliaria" width="350" height="150" closable="true" closeOnEscape="false" resizable="false">
            <h:form id="frmEstatus">
                <div align="center">
                    <p:panelGrid style="width: 100%" layout="grid" columns="1">
                        <h:outputText value="MATRICULA INMOBILIARIA " style="font-weight: bolder;"/>
                        <h:outputText value="#{gestionFicha.predio.numPredio}" style="font-weight: bolder; color: #0066cc"/>
                        <f:facet name="footer">
                            <div align="center">
                                <p:commandButton id="btnContinuar" value="Continuar" actionListener="#{gestionFicha.continuar()}" update="frmMain" oncomplete="PF('dlgMatricula').hide()"/>
                            </div>
                        </f:facet>
                    </p:panelGrid>
                </div>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>