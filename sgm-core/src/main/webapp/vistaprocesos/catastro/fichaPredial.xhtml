<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:dlg="http://xmlns.jcp.org/jsf/composite/dialog">

    <f:metadata>
        <f:event type="preRenderView" listener="#{fichaPredial.load()}"/>
        <f:viewParam name="predio" value="#{fichaPredial.predioId}"/>
    </f:metadata>

    <ui:define name="head">
        <!--        <script src="../../resources/pfJs/number.js" type="text/javascript"></script>
                <script src="../../resources/pfJs/keyPress.js" type="text/javascript"></script>-->
    </ui:define>
    <ui:define name="content">
        <center>
            <h1>Ficha Predial</h1>
        </center>

        <div align="left">
            <p:panelGrid id="datosGenerales" layout="grid" columns="2" style="width: 100%">
                <h:outputText value="No. Predio/Código Único : #{fichaPredial.predio.numPredio}" style="font-weight: bolder"/>
                <p:commandLink id="linkearFicha" value="No. Ficha registral : #{fichaPredial.ficha.numFicha}" actionListener="#{fichaPredial.linkearFicha()}" rendered="#{fichaPredial.ficha!=null}"/>
            </p:panelGrid>
        </div>
        <p:accordionPanel id="tdatos" style="width: 100%">
            <p:tab id="s1" title="1. Identificacion y ubicacion predial">
                <h:form id="frmDatosPredio">
                    <div align="right">
                        <p:remoteCommand name="rc1" actionListener="#{fichaPredial.guardarDatosPredio(null, fichaPredial.informante)}" rendered="#{fichaPredial.editable}"/>
                        <p:commandButton  id="btnS1" value="Guardar" icon="ui-icon-disk" actionListener="#{fichaPredial.openDialog}"
                                          process="@form" action="#{fichaPredial.setRemotteCommand('rc1')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}"/>
                    </div>
                    <p:tabView id="tvUbicacion" style="width: 100%">
                        <p:tab id="tcodActual" title="Codigo Catastral"><!--styleClass="ui-responsive"-->
                            <p:panelGrid columns="6" layout="grid" style="width: 100%" >
                                <h:outputText value="Tipo de predio :" style="font-weight: bolder"/>
                                <p:selectOneMenu id="tipoPredio" value="#{fichaPredial.predio.tipoPredio}" style="width: 90%">
                                    <f:selectItem itemLabel="Urbano" itemValue="U"/>
                                    <f:selectItem itemLabel="Rural" itemValue="R"/>
                                </p:selectOneMenu>
                                <h:outputText value=" Estado Predio:" style="font-weight: bolder" />
                                <p:selectOneMenu id="estadoPredio" value="#{fichaPredial.predio.estado}" effect="fade" >
                                    <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                    <f:selectItem itemLabel="Activo" itemValue="A"/>
                                    <f:selectItem itemLabel="Inactivo..." itemValue="I"/>
                                    <f:selectItem itemLabel="Historico" itemValue="H"/>
                                </p:selectOneMenu>
                                <h:outputText value="Ficha madre:" styleClass="FontBold"/>
                                <p:inputSwitch value="#{fichaPredial.predio.fichaMadre}" offLabel="No" onLabel="Si" label="Ficha madre" />

                            </p:panelGrid>
                            <p:panelGrid style="margin-top:20px">
                                <f:facet name="header">
                                    <p:row>
                                        <p:column>Provincia:    </p:column>
                                        <p:column>Cantón :      </p:column>
                                        <p:column>Parroquia :   </p:column>
                                        <p:column>Zona :        </p:column>
                                        <p:column>Sector :      </p:column>
                                        <p:column>Mz. :         </p:column>
                                        <p:column>Lote :        </p:column>
                                        <p:column>Bloque :      </p:column>
                                        <p:column>Piso :        </p:column>
                                        <p:column>Unidad :      </p:column>
                                    </p:row>
                                </f:facet>
                                <p:row>
                                    <p:column><p:inputText id="prov"  placeholder="Provincia" title="Provincia : #{fichaPredial.predio.provincia}" value="#{fichaPredial.predio.provincia}" readonly="true" style=" text-align: center; width: 89%" maxlength="2"  /></p:column>
                                    <p:column><p:inputText id="cant" placeholder="Canton" title="Canton : #{fichaPredial.predio.canton}" value="#{fichaPredial.predio.canton}" readonly="true" style="text-align: center; width: 89%"  maxlength="2"/></p:column>
                                    <p:column><p:inputText id="parrq" placeholder="Parroquia" title="Parroquia :#{fichaPredial.predio.parroquia}" value="#{fichaPredial.predio.parroquia}" readonly="true" style="text-align: center; width: 89%" maxlength="2"/></p:column>
                                    <p:column><p:inputText id="zona" placeholder="Zona" title="Zona : #{fichaPredial.predio.zona}" value="#{fichaPredial.predio.zona}" readonly="true" style="text-align: center; width: 89%" maxlength="2"/></p:column>
                                    <p:column><p:inputText id="sect" placeholder="Sector" title="Sector : #{fichaPredial.predio.sector}" value="#{fichaPredial.predio.sector}" readonly="true" style="text-align: center; width: 89%" maxlength="2"/></p:column>
                                    <p:column><p:inputText id="mz" placeholder="Manzana" title="Manzana : #{fichaPredial.predio.mz}" value="#{fichaPredial.predio.mz}" readonly="true" style="text-align: center; width: 89%" maxlength="3"/></p:column>
                                    <p:column><p:inputText id="lot" placeholder="Lote" title="Lote : #{fichaPredial.predio.solar}" value="#{fichaPredial.predio.solar}" readonly="true"  style="text-align: center; width: 89%" maxlength="3"/></p:column>
                                    <p:column><p:inputText id="bloq" placeholder="Bloque" title="Bloque : #{fichaPredial.predio.bloque}" value="#{fichaPredial.predio.bloque}" readonly="true" style="text-align: center; width: 89%" maxlength="3"/></p:column>
                                    <p:column><p:inputText id="piso" placeholder="Piso" title="Piso : #{fichaPredial.predio.piso}" value="#{fichaPredial.predio.piso}" readonly="true" style="text-align: center; width: 89%" maxlength="2"/></p:column>
                                    <p:column><p:inputText id="unid" placeholder="Unidad" title="Unidad : #{fichaPredial.predio.unidad}" value="#{fichaPredial.predio.unidad}" readonly="true" style="text-align: center; width: 89%" maxlength="3"/></p:column>
                                </p:row>
                            </p:panelGrid>
                            <br></br>
                            <p:fieldset legend="Codigos Catastrales" toggleable="true">
                                <p:panelGrid id="codPredioRaiz" layout="grid" columns="2" rendered="#{fichaPredial.predioRaiz.claveCat ne null}">
                                    <h:outputText value="Clave Catastral del Predio Matriz:" style="font-weight: bolder"/>
                                    <p:commandLink value="#{fichaPredial.predioRaiz.claveCat}" rendered="#{fichaPredial.predioRaiz.claveCat ne null}"
                                                   actionListener="#{fichaPredial.redirectFichaPredial(fichaPredial.predioRaiz)}"/>
                                </p:panelGrid>

                                <p:panelGrid id="codigosAnteriores" columns="11" layout="grid" style="width: 100%" >
                                    <h:outputText value="Clave Catastral:" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.claveCat}" style="width: 100px" readonly="true"/>
                                    <p:spacer width="1"/>
                                    <h:outputText value="Clave Catastral Anterior :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.predialant}" style="width: 100%"/>
                                    <p:spacer width="1"/>
                                    <h:outputText value="Nombre del Predio :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.nombreEdificio}" style="width: 100%"/>
                                    <p:spacer width="1"/>
                                    <h:outputText value="Ficha Registral :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.numeroFicha}" style="width: 100%"/>
                                </p:panelGrid>
                            </p:fieldset>
                            <br></br>
                            <p:fieldset legend="Ubicación Grafica del predio o lote" toggleable="true" collapsed="true">
                                <p:commandLink actionListener="# {fichaPredial.redirecGeoportal()}"  >
                                    <p:graphicImage alt="Ubicación Grafica" value="#{fichaPredial.getCroquis()}"   />
                                </p:commandLink>
                            </p:fieldset>
                        </p:tab>

                        <p:tab id="tInfUrb" title="Localizacion del predio">
                            <p:fieldset legend="Ubicacion" toggleable="true">
                                <p:panelGrid id="infoUrbanistica" columns="4" layout="grid" style="width: 100%">
                                    <h:outputText value="(*)Espacio Urbano:" style="font-weight: bolder"/>
                                    <p:selectOneMenu value="#{fichaPredial.predio.tipoConjunto}" effect="fade" converter="entityConverter">
                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                        <f:selectItems value="#{fichaPredial.tiposConjunto}" var="tconj" itemLabel="#{tconj.nombre}" itemValue="#{tconj}"/>
                                    </p:selectOneMenu>
                                    <h:outputText value="(*)Nombre de Barrio o Ciudadela:" style="font-weight: bolder"/>
                                    <p:selectOneMenu value="#{fichaPredial.predio.ciudadela}" effect="fade" converter="entityConverter" filter="true" filterMatchMode="contains">
                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                        <f:selectItems value="#{fichaPredial.ciudadelas}" var="cdla" itemLabel="#{cdla.nombre}" itemValue="#{cdla}"/>
                                    </p:selectOneMenu>
                                    <h:outputText value="(*)Nombre del Predio o Edificio :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.nombreEdificio}"/>
                                    <h:outputText value="(*)Zona :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.zona}" readonly="true"/>
                                    <h:outputText value="(*)Sector :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.sector}" readonly="true"/>
                                    <h:outputText value="(*)Mz :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.mz}" readonly="true"/>
                                    <h:outputText value="(*)Lote :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.solar}" readonly="true"/>
                                    <h:outputText value="Bloque:" style="font-weight: bolder" rendered="#{fichaPredial.mainConfig.fichaPredial.camposAdicionales}"/>
                                    <p:inputText value="#{fichaPredial.predio.bloque}" readonly="true" rendered="#{fichaPredial.mainConfig.fichaPredial.camposAdicionales}"/>
                                    <h:outputText value="Planta (Piso):" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.piso}"/>
                                    <h:outputText value="Unidad:" style="font-weight: bolder" rendered="#{fichaPredial.mainConfig.fichaPredial.camposAdicionales}"/>
                                    <p:inputText value="#{fichaPredial.predio.unidad}" readonly="true" rendered="#{fichaPredial.mainConfig.fichaPredial.camposAdicionales}"/>
                                    <h:outputText value="Division :" style="font-weight: bolder" rendered="#{fichaPredial.mainConfig.fichaPredial.camposAdicionales}"/>
                                    <p:inputText value="#{fichaPredial.predio.divisionUrb}" rendered="#{fichaPredial.mainConfig.fichaPredial.camposAdicionales}"/>
                                    <h:outputText value="Departamento :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.numDepartamento}"/>
                                    <h:outputText value="Oficina :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.exOficina}"/>
                                    <h:outputText value="Local :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.exLocal}"/>
                                    <h:outputText value="Parqueo :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.exParqueo}"/>
                                    <h:outputText value="Bodega :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.exBodega}"/>
                                    <h:outputText value="Acera :" style="font-weight: bolder"/>
                                    <p:selectOneMenu id="exAcera" value="#{fichaPredial.predio.exAcera}" effect="fade" converter="entityConverter">
                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                        <f:selectItems value="#{fichaPredial.getListado('predio.acera')}" var="a" itemLabel="#{a.valor}" itemValue="#{a}"/>
                                    </p:selectOneMenu>
                                    <h:outputText value="Ubicacion :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.exUbicacion}"/>

                                    <h:outputText value="Coordenadas en X (Latitud) :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.coordx}" title="Coordenadas geográficas" style="width: 80%">
                                        <f:convertNumber pattern="##############.####" locale="us"/>
                                    </p:inputText>
                                    <h:outputText value="Coordenada en Y (Longitud) :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.coordy}" title="Coordenadas geográficas" style="width: 80%">
                                        <f:convertNumber pattern="##############.####" locale="us"/>
                                    </p:inputText>

                                    <h:outputText value="Sector de Valor :" style="font-weight: bolder"/>
                                    <p:selectOneMenu id="subsector" value="#{fichaPredial.predio.subsector}" required="false" var="sv" converter="entityConverter"
                                                     label="subsector" requiredMessage="El campo subsector es obligatorio" filter="true" filterMatchMode="contains">
                                        <f:selectItem itemLabel="Elija un subsector" itemValue="#{null}"/>
                                        <f:selectItems var="sbs" value="#{fichaPredial.subsectores}" itemLabel="#{sbs.sector} - #{sbs.detalle}" itemValue="#{sbs}"/>
                                        <p:column style="width:20%">
                                            <h:outputText styleClass="#{sv.sector}" />
                                        </p:column>
                                        <p:column style="width:60%">
                                            <h:outputText value="#{sv.detalle}" />
                                        </p:column>
                                    </p:selectOneMenu>
                                    <h:outputText value="Sector de Valor :" style="font-weight: bolder"/>
                                    <h:outputText value="Sector de Valor :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.subsector.valorM2}" style="width: 80%" readonly="true">
                                        <f:convertNumber pattern="##############.##" locale="us"/>
                                    </p:inputText>
                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="Calles" toggleable="true">
                                <p:panelGrid id="pgCalles" columns="4" layout="grid" style="width: 100%">
                                    <h:outputText value="(*)Calle Principal :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.calle}" style="width: 80%"/>
                                    <h:outputText value="Calle Sec. :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.calleS}" style="width: 80%"/>
                                    <h:outputText value="Placa Domiciliaria :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.predio.numeroVivienda}" style="width: 40%"/>
                                </p:panelGrid>
                            </p:fieldset>
                        </p:tab>
                        <p:tab id="tavaluos" title="Areas y Avaluos">
                            <p:fieldset legend="Avaluos" toggleable="true" style="width: 100%">
                                <p:panelGrid id="pgAvaluos" columns="4" layout="grid" style="width: 100%">
                                    <h:outputText value="Terreno :" style="font-weight: bolder"/>
                                    <pe:inputNumber value="#{fichaPredial.predio.avaluoSolar}" decimalPlaces="2" readonly="true"/>
                                    <h:outputText value="Construccion :" style="font-weight: bolder"/>
                                    <pe:inputNumber value="#{fichaPredial.predio.avaluoConstruccion}" decimalPlaces="2"  readonly="true"/>
                                    <h:outputText value="Avaluo propiedad :" style="font-weight: bolder"/>
                                    <pe:inputNumber value="#{fichaPredial.predio.avaluoMunicipal}" decimalPlaces="2" readonly="true"/>
                                    <h:outputText value="Avaluo cultivos :" style="font-weight: bolder"/>
                                    <pe:inputNumber value="#{fichaPredial.predio.avaluoMunicipal}" decimalPlaces="2" readonly="true"/>
                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="Areas" toggleable="true">
                                <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                    <h:outputText value="(*)Alicuota :"  style="font-weight: bolder"/>
                                    <pe:inputNumber id="alicSolar" value="#{fichaPredial.predio.alicuotaUtil}" decimalPlaces="2" readonly="false"/>
                                    <h:outputText value="(*)Area del terreno :"  style="font-weight: bolder"/>
                                    <pe:inputNumber id="asolar" value="#{fichaPredial.predio.areaSolar}" decimalPlaces="2" readonly="false"/>
                                    <h:outputText value="Area de cultivos :" style="font-weight: bolder"/>
                                    <pe:inputNumber id="acult" value="#{fichaPredial.predio.areaCultivos}" decimalPlaces="2" readonly="false"/>
                                    <h:outputText value="Area construccion :" style="font-weight: bolder"/>
                                    <pe:inputNumber id="asac" value="#{fichaPredial.predio.areaDeclaradaConst}" decimalPlaces="2" readonly="false"/>
                                    <h:outputText value="Area de obras :" style="font-weight: bolder"/>
                                    <pe:inputNumber id="aobras" value="#{fichaPredial.predio.areaObras}" decimalPlaces="2" readonly="false"/>
                                </p:panelGrid>
                            </p:fieldset>
                        </p:tab>
                        <!--                        <p:tab id="turbanistico" title="Informacion Urbanistica">
                                                    <p:fieldset legend="Datos Urbanisticos" toggleable="true" style="width: 100%">
                                                        <p:panelGrid id="pgDatosUrb" columns="4" layout="grid" style="width: 100%">
                                                            <h:outputText value="Manzana Urb. :" style="font-weight: bolder"/>
                                                            <p:inputText value="#{fichaPredial.predio.urbMz}" />
                                                            <h:outputText value="Lote Urb. :" style="font-weight: bolder"/>
                                                            <p:inputText onkeypress="return isNumber(event)" value="#{fichaPredial.predio.urbSolarnew}"   />
                                                            <h:outputText value="Sector Urb. :" style="font-weight: bolder"/>
                                                            <p:inputText value="#{fichaPredial.predio.urbSec}" onkeypress="return isNumber(event)"  />
                                                            <h:outputText value="" style="font-weight: bolder"/>
                                                            <h:outputText value="" style="font-weight: bolder"/>
                                                        </p:panelGrid>
                                                    </p:fieldset>
                                                </p:tab>-->
                        <p:tab  title="Codigo Catastral Predio Raiz" rendered="#{fichaPredial.catPredioFusionDivision ne null}"><!--styleClass="ui-responsive"-->
                            <p:panelGrid columns="4" layout="grid" style="width: 100%" >
                                <h:outputText value="Tipo de predio :" style="font-weight: bolder" />
                                <p:selectOneMenu value="#{fichaPredial.catPredioFusionDivision.predioRaiz.tipoPredio}" disabled="true" style="width: 90%">
                                    <f:selectItem itemLabel="Urbano" itemValue="U"/>
                                    <f:selectItem itemLabel="Rural" itemValue="R"/>
                                </p:selectOneMenu>
                                <h:outputText value=" Estado Predio:" style="font-weight: bolder" />
                                <p:selectOneMenu value="#{fichaPredial.catPredioFusionDivision.predioRaiz.estado}" disabled="true" effect="fade" >
                                    <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                    <f:selectItem itemLabel="Activo" itemValue="A"/>
                                    <f:selectItem itemLabel="Inactivo..." itemValue="I"/>
                                    <f:selectItem itemLabel="Historico" itemValue="H"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid style="margin-top:20px">
                                <f:facet name="header">
                                    <p:row>
                                        <p:column>Provincia:    </p:column>
                                        <p:column>Cantón :      </p:column>
                                        <p:column>Parroquia :   </p:column>
                                        <p:column>Zona :        </p:column>
                                        <p:column>Sector :      </p:column>
                                        <p:column>Mz. :         </p:column>
                                        <p:column>Lote :        </p:column>
                                        <p:column>Bloque :      </p:column>
                                        <p:column>Piso :        </p:column>
                                        <p:column>Unidad :      </p:column>
                                    </p:row>
                                </f:facet>
                                <p:row>
                                    <p:column><p:inputText  placeholder="Provincia" title="Provincia : #{fichaPredial.catPredioFusionDivision.predioRaiz.provincia}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.provincia}" readonly="true" style=" text-align: center; width: 89%" maxlength="2"  /></p:column>
                                    <p:column><p:inputText  placeholder="Canton" title="Canton : #{fichaPredial.catPredioFusionDivision.predioRaiz.canton}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.canton}" readonly="true" style="text-align: center; width: 89%"  maxlength="2"/></p:column>
                                    <p:column><p:inputText  placeholder="Parroquia" title="Parroquia :#{fichaPredial.catPredioFusionDivision.predioRaiz.parroquia}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.parroquia}" readonly="true" style="text-align: center; width: 89%" maxlength="2"/></p:column>
                                    <p:column><p:inputText  placeholder="Zona" title="Zona : #{fichaPredial.catPredioFusionDivision.predioRaiz.zona}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.zona}" readonly="true" style="text-align: center; width: 89%" maxlength="2"/></p:column>
                                    <p:column><p:inputText placeholder="Sector" title="Sector : #{fichaPredial.catPredioFusionDivision.predioRaiz.sector}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.sector}" readonly="true" style="text-align: center; width: 89%" maxlength="2"/></p:column>
                                    <p:column><p:inputText  placeholder="Manzana" title="Manzana : #{fichaPredial.catPredioFusionDivision.predioRaiz.mz}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.mz}" readonly="true" style="text-align: center; width: 89%" maxlength="3"/></p:column>
                                    <p:column><p:inputText  placeholder="Lote" title="Lote : #{fichaPredial.catPredioFusionDivision.predioRaiz.solar}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.solar}" readonly="true"  style="text-align: center; width: 89%" maxlength="3"/></p:column>
                                    <p:column><p:inputText  placeholder="Bloque" title="Bloque : #{fichaPredial.catPredioFusionDivision.predioRaiz.bloque}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.bloque}" readonly="true" style="text-align: center; width: 89%" maxlength="3"/></p:column>
                                    <p:column><p:inputText  placeholder="Piso" title="Piso : #{fichaPredial.catPredioFusionDivision.predioRaiz.piso}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.piso}" readonly="true" style="text-align: center; width: 89%" maxlength="2"/></p:column>
                                    <p:column><p:inputText  placeholder="Unidad" title="Unidad : #{fichaPredial.catPredioFusionDivision.predioRaiz.unidad}" value="#{fichaPredial.catPredioFusionDivision.predioRaiz.unidad}" readonly="true" style="text-align: center; width: 89%" maxlength="3"/></p:column>
                                </p:row>
                            </p:panelGrid>
                            <br></br>
                            <p:fieldset legend="Codigos Catastrales" toggleable="true">
                                <p:panelGrid  layout="grid" columns="2" rendered="#{fichaPredial.catPredioFusionDivision.predioRaiz.predioRaiz.claveCat ne null}">
                                    <h:outputText value="Clave Catastral del Predio Matriz:" style="font-weight: bolder"/>
                                    <p:commandLink value="#{fichaPredial.catPredioFusionDivision.predioRaiz.predioRaiz.claveCat}" rendered="#{fichaPredial.predioRaiz.claveCat ne null}"
                                                   actionListener="#{fichaPredial.redirectFichaPredial(fichaPredial.catPredioFusionDivision.predioRaiz.predioRaiz)}"/>
                                </p:panelGrid>

                                <p:panelGrid  columns="12" layout="grid" style="width: 100%" >
                                    <h:outputText value="Clave Catastral:" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.catPredioFusionDivision.predioRaiz.claveCat}" style="width: 100px" readonly="true"/>
                                    <p:spacer width="1"/>
                                    <h:outputText value="Clave Catastral Anterior :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.catPredioFusionDivision.predioRaiz.predialant}" readonly="true" style="width: 100%"/>
                                    <p:spacer width="1"/>
                                    <h:outputText value="Codigo Unico :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.catPredioFusionDivision.predioRaiz.numPredio}" readonly="true" style="width: 100%"/>
                                    <p:spacer width="1"/>
                                    <h:outputText value="Ficha Registral :" style="font-weight: bolder"/>
                                    <p:inputText value="#{fichaPredial.catPredioFusionDivision.predioRaiz.numeroFicha}"  readonly="true" style="width: 100%"/>
                                </p:panelGrid>
                            </p:fieldset>
                        </p:tab>
                    </p:tabView>
                </h:form>
            </p:tab>
            <p:tab id="s2" title="2. Identificacion legal">
                <h:form id="frmTenencia">
                    <div align="right">
                        <p:remoteCommand name="rc2" actionListener="#{fichaPredial.guardarDatosPredio('ACTUALIZACION DE IDENTIFICACION LEGAL', fichaPredial.informante)}" rendered="#{fichaPredial.editable}"/>
                        <p:commandButton id="btnS2" value="Guardar"
                                         icon="ui-icon-disk"  actionListener="#{fichaPredial.openDialog}"
                                         process="@form" action="#{fichaPredial.setRemotteCommand('rc2')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}"/>
                    </div>
                    <p:fieldset legend="Tenencia">
                        <p:panelGrid columns="2" layout="grid" style="width: 100%">
                            <h:outputText value="Tenencia :" style="font-weight: bolder"/>
                            <p:selectOneMenu value="#{fichaPredial.predio.propiedad}" effect="fade" converter="entityConverter">
                                <!--                                <f:attribute name="name" value="CatPropiedadItem"/>-->
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.tiposPropiedad}" var="propiedad" itemLabel="#{propiedad.nombre}" itemValue="#{propiedad}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Predio Sin Título">
                        <p:panelGrid columns="2" layout="grid" style="width: 100%">
                            <h:outputText value="Requiere Perfeccionamiento :" style="font-weight: bolder"/>
                            <p:selectOneMenu value="#{fichaPredial.predio.requierePerfeccionamiento}" effect="fade" >
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItem itemLabel="Si" itemValue="#{true}"/>
                                <f:selectItem itemLabel="No" itemValue="#{false}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Años sin Perfeccionamiento :" style="font-weight: bolder"/>
                            <p:inputText type="num" value="#{fichaPredial.predio.aniosSinPerfeccionamiento}">
                                <pe:keyFilter mask="num"/>
                            </p:inputText>
                            <h:outputText value="Años en Posesión :" style="font-weight: bolder"/>
                            <p:inputText type="num" value="#{fichaPredial.predio.aniosPosesion}">
                                <pe:keyFilter mask="num"/>
                            </p:inputText>
                            <h:outputText value="Tipo de Poseedor :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="tipoPoseedor" value="#{fichaPredial.predio.tipoPoseedor}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.tipo_poseedor')}" var="ptp1" itemLabel="#{ptp1.valor}" itemValue="#{ptp1}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Nombre Pueblo/Etnia :" style="font-weight: bolder"/>
                            <p:inputText value="#{fichaPredial.predio.nombrePuebloEtnia}"/>
                        </p:panelGrid>
                    </p:fieldset>
                </h:form>
                <h:form id="frmPropietarios">
                    <div align="right">
                        <p:commandButton value="Agregar propietario" iconPos="ui-icon-person" actionListener="#{fichaPredial.propietario(null)}" styleClass="btnStyle"
                                         rendered="#{fichaPredial.editable}" update="tdatos:frmPropietarios:dtPropietarios">
                            <p:ajax event="dialogReturn" listener="#{fichaPredial.procesarPropietario}" update="tdatos:frmPropietarios:dtPropietarios"  />
                        </p:commandButton>
                    </div>
                    <p:dataTable id="dtPropietarios"  value="#{fichaPredial.propietarios}" var="pp" reflow="true" paginator="true" rows="5" paginatorPosition="top" style="width: 100%">
                        <p:column headerText="Tipo">
                            <h:outputText value="#{pp.tipo.valor}"/>
                        </p:column>
                        <p:column headerText="DNI">
                            <h:outputText value="#{pp.ente.ciRuc}"/>
                        </p:column>
                        <p:column headerText="Descripcion">
                            <h:outputText value="#{pp.ente.apellidos} #{pp.ente.nombres}" rendered="#{pp.ente.esPersona}" style="text-transform: uppercase"/>
                            <h:outputText value="#{pp.ente.razonSocial}" rendered="#{!pp.ente.esPersona}" style="text-transform: uppercase"/>
                        </p:column>
                        <p:column headerText="Accion" style="text-align: center" rendered="#{fichaPredial.editable}">
                            <p:commandLink value="Editar" actionListener="#{fichaPredial.propietario(pp)}" >
                                <p:ajax event="dialogReturn" listener="#{fichaPredial.procesarPropietario}" update="tdatos:frmPropietarios"/>
                            </p:commandLink>
                            <p:spacer width="10"/>
                            <p:commandLink value="Quitar" actionListener="#{fichaPredial.eliminarPropietario(pp)}" update="dtPropietarios" partialSubmitFilter="true" >
                                <p:ajax update="dtPropietarios"/>
                            </p:commandLink>
                        </p:column>
                        <p:column headerText="Accion" style="text-align: center" rendered="#{!fichaPredial.editable}">
                            <p:commandLink value="Ver" actionListener="#{fichaPredial.propietario(pp)}" >
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:tab>
            <p:tab id="s4" title="3. Caracterizacion del lote">
                <h:form id="frmCaracSolar">
                    <div align="right">
                        <p:remoteCommand name="rc3" actionListener="#{fichaPredial.guardarCaracteristicas(fichaPredial.caracteristicas)}"  rendered="#{fichaPredial.editable}"/>
                        <p:commandButton id="btnS3" value="Guardar"  icon="ui-icon-disk" update="frmSubirDocumentosDialog"
                                         actionListener="#{fichaPredial.openDialog}" process="@form" action="#{fichaPredial.setRemotteCommand('rc3')}" rendered="#{fichaPredial.editable}"/>
                    </div>
                    <p:fieldset legend="Caracteristicas" toggleable="true">
                        <p:panelGrid columns="4" layout="grid" style="width: 100%">
                            <h:outputText value="(*)Localizacion en Mz.:" style="font-weight: bolder"/>
                            <p:selectOneMenu id="localizacion" value="#{fichaPredial.caracteristicas.locManzana}" effect="fade" converter="entityConverter">

                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.loc_manzana')}" var="c" itemLabel="#{c.valor}" itemValue="#{c}"/>
                            </p:selectOneMenu>
                            <h:outputText value="(*)Topografia :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="topografia" value="#{fichaPredial.predio.topografiaSolar}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.topografia')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>
                            <h:outputText value="(*)Caract. Suelo :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="caracteristica" value="#{fichaPredial.predio.tipoSuelo}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.tipo_suelo')}" var="suelos" itemLabel="#{suelos.valor}" itemValue="#{suelos}"/>
                            </p:selectOneMenu>
                            <h:outputText value="(*)Constructividad :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="constructividad" value="#{fichaPredial.predio.constructividad}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.constructividad_suelo')}" var="const1" itemLabel="#{const1.valor}" itemValue="#{const1}"/>
                            </p:selectOneMenu>
                            <h:outputText value="(*)Ocupacion :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="etapaEdif" value="#{fichaPredial.caracteristicas.estadoSolar}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.estado_solar')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>
                            <h:outputText value="(*)Forma del predio:" style="font-weight: bolder"/>
                            <p:selectOneMenu id="formaSolar" value="#{fichaPredial.predio.formaSolar}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.forma_solar')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>

                            <h:outputText value="Cobertura predominante :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="coberturaPredominante" value="#{fichaPredial.caracteristicas.coberturaPredominante}" effect="fade" converter="entityConverter">

                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.cobertura_predominante')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Ecosistema Relevante :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="ecoRelevante" value="#{fichaPredial.caracteristicas.ecosistemaRelevante}" effect="fade" converter="entityConverter">

                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.ecosistema_relevante')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>
                            <h:outputText value=" Clasificación del suelo :" style="font-weight: bolder" />
                            <p:selectOneMenu id="clasifSuelo" value="#{fichaPredial.predio.clasificacionSuelo}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.clasificacion_suelo')}" var="csfS1" itemLabel="#{csfS1.valor}" itemValue="#{csfS1}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Tiene Hipoteca :" style="font-weight: bolder"/>
                            <p:selectBooleanCheckbox value="#{fichaPredial.caracteristicas.tieneHipoteca}" />
                            <h:outputText id="lbinstHip" value="Institución Hipoteca :" style="font-weight: bolder" />
                            <p:inputText id="instHip" value="#{fichaPredial.caracteristicas.instFinancieraHip}" style="width: 90%; " />
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Usos" toggleable="true">
                        <p:panelGrid columns="2" layout="grid" style="width: 100%">
                            <h:outputText value="(*)Uso del predio :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="usoSolar" value="#{fichaPredial.predio.usoSolar}" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.uso_solar')}" var="uso" itemLabel="#{uso.valor}" itemValue="#{uso}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Cerramiento" toggleable="true">
                        <p:panelGrid columns="2" layout="grid" style="width: 100%">
                            <h:outputText value="Cerramiento del predio :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="cerramiento" value="#{fichaPredial.caracteristicas.cerramientoCtlg}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.cerramiento')}" var="cr1" itemLabel="#{cr1.valor}" itemValue="#{cr1}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Afectación al Lote" toggleable="true">
                        <p:panelGrid columns="2" layout="grid" style="width: 100%">
                            <h:outputText value="Afectación :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="afectaLote" value="#{fichaPredial.caracteristicas.afectacionLote}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.afectacion_lote')}" var="afl1" itemLabel="#{afl1.valor}" itemValue="#{afl1}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </p:fieldset>

                    <p:fieldset legend="Dimensiones del lote" toggleable="true">
                        <p:fieldset legend="Dimension de Frentes" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="(*)Frente:" style="font-weight: bolder"/>
                                <pe:inputNumber id="frt1" value="#{fichaPredial.caracteristicas.frente1}" decimalPlaces="2"/>

                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Fondos" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="(*)Fondo :" style="font-weight: bolder"/>
                                <pe:inputNumber id="ft1" value="#{fichaPredial.caracteristicas.fondo1}" decimalPlaces="2"/>
                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Superficie" toggleable="true"  rendered="#{fichaPredial.mainConfig.fichaPredial.camposAdicionales}">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="(*)Superficie :" style="font-weight: bolder"/>
                                <pe:inputNumber  value="#{fichaPredial.caracteristicas.superficie}" decimalPlaces="2"/>1
                            </p:panelGrid>
                        </p:fieldset>

                    </p:fieldset>
                    <p:fieldset legend="Obras Complementarias o Mejoras" toggleable="true">
                        <p:panelGrid columns="4" layout="grid" style="width: 100%">
                            <h:outputText value="Tipo de Obra:" style="font-weight: bolder"/>
                            <p:selectOneMenu id="tipoObraMejora" value="#{fichaPredial.caracteristicas.tipoObraMejora}" style="width: 50%" effect="fade" converter="entityConverter" filter="true" filterMatchMode="contains">
                                <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.tipo_obra_mejora')}" var="tm1" itemLabel="#{tm1.valor}" itemValue="#{tm1}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Area de Mejora:" style="font-weight: bolder"/>
                            <pe:inputNumber id="areaMejora" value="#{fichaPredial.caracteristicas.areaMejora}" decimalPlaces="6"/>
                            <h:outputText value="Estado:" style="font-weight: bolder"/>
                            <p:selectOneMenu id="estadoObraMejora" value="#{fichaPredial.caracteristicas.estadoMejora}" style="width: 50%" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('edif.estado_cons')}" var="sm1" itemLabel="#{sm1.valor}" itemValue="#{sm1}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Material de Construccion" style="font-weight: bolder"/>
                            <p:selectOneMenu id="materialObraMejora" value="#{fichaPredial.caracteristicas.materialMejora}" style="width: 50%" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.material_construccion')}" var="mms1" itemLabel="#{mms1.valor}" itemValue="#{mms1}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Conflicto" toggleable="true">
                        <p:panelGrid columns="4" layout="grid" style="width: 100%">
                            <h:outputText value="Lote en Conflicto :" style="font-weight: bolder"/>
                            <p:selectBooleanCheckbox value="#{fichaPredial.caracteristicas.loteEnConflicto}" />
                            <h:outputText value="Observaciones de Lote en Conflicto :" style="font-weight: bolder"/>
                            <p:inputTextarea value="#{fichaPredial.caracteristicas.opbservLoteEnConflicto}" autoResize="false" style="width: 100%"/>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Permiso Construcción y Adosamiento" toggleable="true">
                        <p:panelGrid columns="4" layout="grid" style="width: 100%">
                            <h:outputText value="Tiene Permiso Construcción :" style="font-weight: bolder"/>
                            <p:selectBooleanCheckbox value="#{fichaPredial.caracteristicas.tienePermisoConst}" />
                            <h:outputText value="Tiene Adosamiento :" style="font-weight: bolder"/>
                            <p:selectBooleanCheckbox value="#{fichaPredial.caracteristicas.tieneAdosamiento}" />
                            <h:outputText value="Tiene Retiros :" style="font-weight: bolder"/>
                            <p:selectBooleanCheckbox value="#{fichaPredial.caracteristicas.tieneRetiros}" />
                        </p:panelGrid>
                    </p:fieldset>
                </h:form>
            </p:tab>
            <p:tab id="s6" title="4. Infraestructura, Instalaciones y Servicios">
                <h:form id="frmServicios">
                    <div align="right">
                        <p:remoteCommand name="rc4" actionListener="#{fichaPredial.guardarServicios(fichaPredial.servicios, fichaPredial.vias, fichaPredial.instalacionesEspeciales, null)}" rendered="#{fichaPredial.editable}" />
                        <p:commandButton id="btnS4" value="Guardar" icon="ui-icon-disk"
                                         actionListener="#{fichaPredial.openDialog}"  process="@form" action="#{fichaPredial.setRemotteCommand('rc4')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}"/>
                    </div>
                    <p:fieldset legend="Vias" toggleable="true">
                        <p:fieldset legend="Material de Rodadura">
                            <p:selectManyCheckbox id="vias" styleClass="noBorder" value="#{fichaPredial.vias}" layout="responsive" columns="4" converter="entityConverter" style="display:block; border-collapse: separate;" >
                                <f:selectItems value="#{fichaPredial.getListado('predio.vias')}" var="item" itemLabel="#{item.valor} " itemValue="#{item}" />
                            </p:selectManyCheckbox>
                        </p:fieldset>
                        <br/>
                        <br/>
                        <p:fieldset legend="Tipo">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="Aceras " style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="chckAceras" value="#{fichaPredial.servicios.tieneAceras}" />
                                <h:outputText value="Bordillo " style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="chckBordillo" value="#{fichaPredial.servicios.tieneBordillo}" />
                                <h:outputText value="Tipo de via:" style="font-weight: bolder"/>
                                <p:selectOneMenu id="tipoVia" value="#{fichaPredial.predio.tipovia}" effect="fade" converter="entityConverter">
                                    <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                    <f:selectItems value="#{fichaPredial.getListado('predio.tipovia')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Otro Tipo de via:" style="font-weight: bolder"/>
                                <p:selectOneMenu id="otroTipoVia" value="#{fichaPredial.predio.otroTipovia}" effect="fade" converter="entityConverter">
                                    <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                    <f:selectItems value="#{fichaPredial.getListado('predio.otro_tipo_via')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                                </p:selectOneMenu>
                            </p:panelGrid>


                        </p:fieldset>
                        <br/>
                        <br/>
                    </p:fieldset>
                    <p:fieldset legend="Instalaciones Nivel Vivienda" toggleable="true">

                        <p:fieldset legend="Alcantarillado" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="Alcantarillado pluvial :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="alcantarilladoPluvial" value="#{fichaPredial.servicios.alcantarilladoPluvial}"/>
                                <h:outputText value="Alcantarillado Sanitario :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox  value="#{fichaPredial.servicios.tieneAlcantarillado}"/>
                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Agua potable" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">

                                <h:outputText value="Conexion domiciliaria :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="aguaPotable" value="#{fichaPredial.servicios.tieneAguaPotable}"/>
                                <h:outputText value="No. Medidor :" style="font-weight: bolder"/>
                                <p:inputText id="numMedidorAgua" value="#{fichaPredial.servicios.medidorAgua}" />
                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Energia electrica" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="Electricidad :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="electricidad" value="#{fichaPredial.servicios.tieneElectricidad}"/>

                                <h:outputText value="Alumbrado publico :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="alumbrado" value="#{fichaPredial.servicios.alumbrado}"/>
                                <h:outputText value="Medidor energia :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="medidoree" value="#{fichaPredial.servicios.medidorEe}"/>
                                <h:outputText value="No. Medidor :" style="font-weight: bolder"/>
                                <p:inputText id="numMedidorEe" value="#{fichaPredial.servicios.medidorElectrico}"/>
                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Servicios" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="Recoleccion. Basura :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox  value="#{fichaPredial.servicios.recoleccionbasura}"/>
                                <h:outputText value="Aseo calles :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="aseocalles" value="#{fichaPredial.servicios.aseoCalles}"/>
                                <h:outputText value="Trans. Publico :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="tpublico" value="#{fichaPredial.servicios.tpublico}"/>
                                <h:outputText value="Alarmas Comunitarias :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="alarmCom" value="#{fichaPredial.servicios.alarmas_comunitarias}"/>
                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset  legend="Comunicaciones" toggleable="true" >
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="Tv. Pagada :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="tvpagadas" value="#{fichaPredial.servicios.tvPag}"/>
                                <h:outputText value="Internet :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="internet" value="#{fichaPredial.servicios.tieneInternet}"/>
                                <h:outputText value="Telefonia Satelital :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="telfSat" value="#{fichaPredial.servicios.telefoniasatelital}"/>
                                <h:outputText value="Red Telefonica :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="redTelf" value="#{fichaPredial.servicios.tieneTelfFijo}"/>
                                <h:outputText value="Cobertura Celular :" style="font-weight: bolder"/>
                                <p:selectBooleanCheckbox id="cobCell" value="#{fichaPredial.servicios.coberturaCelular}"/>
                            </p:panelGrid>
                        </p:fieldset>
                    </p:fieldset>
                    <p:fieldset  legend="Instalaciones Especiales " toggleable="true" >
                        <p:selectManyCheckbox  styleClass="noBorder" value="#{fichaPredial.instalacionesEspeciales}" layout="responsive" columns="3" converter="entityConverter" style="display:block; border-collapse: separate;" >
                            <f:selectItems value="#{fichaPredial.getListado('predio.instalacion_especial')}" var="item" itemLabel="#{item.valor}" itemValue="#{item}" />
                        </p:selectManyCheckbox>
                    </p:fieldset>

                </h:form>
            </p:tab>
            <p:tab id="s13" title="5. Escrituras">
                <h:form id="frmEscrituras">
                    <div align="right">
                        <p:commandButton id="btnAddEscritura" value="Agregar Escritura"  actionListener="#{fichaPredial.saveEscrituraControl()}" oncomplete="PF('dlgEscritura').show()" update="frmDlgEscr"/>
                    </div>
                    <p:dataTable id="dtEscrituras" value="#{fichaPredial.escrituras}" var="e" scrollable="true" style="width: 100%"
                                 emptyMessage="No se encontraron escrituras" paginator="true" paginatorPosition="top"
                                 rows="10"  lazy="true" rowsPerPageTemplate="20,50,100" filterEvent="enter"
                                 paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowKey="#{e.idEscritura}" selectionMode="single" >
                        <p:column headerText="No. Predio">
                            <h:outputText value="#{e.predio.numPredio}"/>
                        </p:column>
                        <p:column headerText="Tipo Dominio">
                            <h:outputText value="#{e.traslDom.nombre}"/>
                        </p:column>
                        <p:column headerText="No. Repertorio">
                            <h:outputText value="#{e.numRepertorio}"/>
                        </p:column>
                        <p:column headerText="Notaria">
                            <h:outputText value="#{e.notaria}"/>
                        </p:column>
                        <p:column headerText="Fecha Escritura">
                            <h:outputText value="#{e.fecEscritura}"><f:convertDateTime pattern="dd-MM-yyyy " /></h:outputText>
                        </p:column>
                        <p:column headerText="Fecha Inscripción">
                            <h:outputText value="#{e.fecInscripcion}"><f:convertDateTime pattern="dd-MM-yyyy " /></h:outputText>
                        </p:column>
                        <p:column headerText="Area">
                            <h:outputText value="#{e.areaSolar}" ><f:convertNumber pattern="##############.####" locale="us"/></h:outputText>
                        </p:column>
                        <p:column headerText="Estado">
                            <h:outputText value="#{e.estado}"/>
                        </p:column>
                        <p:column headerText="Accion" style="text-align: center" rendered="#{fichaPredial.editable}">
                            <p:commandLink value="Editar" actionListener="#{fichaPredial.updateEscrituraControl(e)}"
                                           oncomplete="PF('dlgEscritura').show()" update=":frmDlgEscr" />
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:tab>
            <p:tab id="s9" title="6. Caracterizacion y elementos constructivos de la edificacion" rendered="#{!fichaPredial.predio.propiedadHorizontal}">
                <h:form id="frmEdificaciones">

                    <style>
                        datatable tbody td {
                            border-color: inherit;
                            font-size: 11px;
                        }
                        .ui-datatable-even {
                            background: #ece3a5;
                        }
                    </style>
                    <p:tabView id="tvEdificaciones">
                        <p:tab id="edif" title="Caracteristicas de la construccion/Anexos">
                            <p:fieldset legend="Fotos" >
                                <p:graphicImage url="http://190.57.138.220/libertad-sgm/FotosServlet?numPredio=#{fichaPredial.predio.numPredio}"  width="20%" height="300"  />
                                <p:commandButton id="btnaddFoto" value="Agregar foto" onclick="PF('dlgSubida').show()" update=":frmSubFotos"/>
                                <p:dataGrid var="f" value="#{fichaPredial.fotos}" columns="3" layout="grid"
                                            rows="3" paginator="true"
                                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                            rowsPerPageTemplate="3,6,9">
                                    <p:panel header="#{f.nombre}" style="text-align:center">
                                        <h:panelGrid columns="1" style="width:100%">
                                            <p:graphicImage url="/FotosServlet?fotoId=#{f.id}" style="width: 250px; height: 250px"/>
                                            <h:outputText value="#{f.nombre}" />
                                            <p:commandLink update=":frmFotos" oncomplete="PF('dlgFoto').show()" title="Ver">
                                                <h:outputText styleClass="ui-icon ui-icon-search" style="margin:0 auto;" />
                                                <f:setPropertyActionListener value="#{f}" target="#{fichaPredial.foto}" />
                                            </p:commandLink>
                                        </h:panelGrid>
                                    </p:panel>
                                </p:dataGrid>
                            </p:fieldset>
                            <p:panelGrid id="pgEdifIdent" columns="2" style="width: 100%">
                                <f:facet name="header">
                                    <div align="right">
                                        <p:commandButton id="btnAgregarAnexos" value="Agregar Anexos" actionListener="#{fichaPredial.crearAnexo(fichaPredial.caracteristicas)}"  update=":frmAnexos" rendered="#{fichaPredial.editable}"/>
                                    </div>
                                </f:facet>
                                <p:row>
                                    <p:column style="width: 50%;">
                                        <br/>
                                        <p:panelGrid id="pgEdifIdentHead" columns="1" style="width: 100%">
                                            <f:facet name="header">EDIFICACIONES</f:facet>
                                            <p:inputText value="Vida Util" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="(*)Area construccion " style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="En construcción (%)" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="(*)Año de construcción" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="(*)Estado de conservación" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="(*)Categoria de construcción" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="(*)Esta rentado" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="(*)No. Pisos" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="Valor Cultural" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <p:inputText value="Uso de Construccion del Piso" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <!--<p:inputText value="(*)Prototipo" style="font-weight: bolder; width: 80%" readonly="true"/>-->
                                            <p:inputText value="Quitar" style="font-weight: bolder; width: 80%" readonly="true"/>
                                            <f:facet name="footer">
                                                <p:spacer height="25px"/>
                                            </f:facet>
                                        </p:panelGrid>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="width: 50%; text-align: center">
                                        <br></br>
                                        <p:dataGrid id="dgHeader" value="#{fichaPredial.ficham.edificaciones}" var="edf" columns="#{fichaPredial.maxEdif}"  style="border: none; width: 100%">
                                            <p:panelGrid columns="1" style="width: 100%">
                                                <f:facet name="header">#{edf.cabecera}</f:facet>
                                                <p:inputText value="#{edf.vidautil}" style="width: 50%" type="number"/>
                                                <pe:inputNumber value="#{edf.areaConsCenso}" style="width: 50%"  decimalPlaces="2" minValue="0"/>
                                                <p:inputText value="#{edf.enConstruccionPorc}" style="width: 50%" maxlength="3" type="number"/>
                                                <p:inputText value="#{edf.anioCons}" style="width: 50%" type="number"/>
                                                <p:selectOneMenu id="estadoConstruccion" value="#{edf.estadoConservacion}" style="width: 50%; height: 80%" converter="entityConverter">

                                                    <f:selectItems value="#{fichaPredial.getListado('edif.estado_cons')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                                                </p:selectOneMenu>
                                                <p:selectOneMenu id="condicionEdif" value="#{edf.categoria}" style="width: 50%; height: 70%" converter="entityConverter">
                                                    <f:selectItems value="#{fichaPredial.categroriasConst}" var="ccx" itemLabel="#{ccx.descripcion}" itemValue="#{ccx}"/>
                                                </p:selectOneMenu>
                                                <p:selectBooleanButton id="rentado" offLabel="No" onLabel="Si" value="#{edf.estaRentado}"/>
                                                <p:inputText type="number" value="#{edf.numPisos}" style="width: 50%" maxlength="3">
                                                    <!--<p:ajax listener="#{fichaPredial.getDetallePiso(edf)}" oncomplete="PF('dlgPisos').show()" update=":frmPisos"/>-->
                                                </p:inputText>
                                                <p:selectOneMenu  value="#{edf.valorCultural}" style="width: 50%" converter="entityConverter"  >
                                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                                    <f:selectItems value="#{fichaPredial.getListado('edif.valor_cultural')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                                                </p:selectOneMenu>

                                                <p:selectOneMenu  value="#{edf.usoConstructivoPiso}" style="width: 50%" effect="fade" converter="entityConverter" filter="true" filterMatchMode="contains">
                                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                                    <f:selectItems value="#{fichaPredial.getListado('edif.uso_constructivo_piso')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                                                </p:selectOneMenu>
<!--<p:outputLabel value="#{edf.prototipo.valor}" rendered="#{edf.prototipo!=null}"/>-->
<!--<p:commandButton id="btnPrototipos" value="Eleigir prototipo" actionListener="#{fichaPredial.selecctionarEdif(edf)}" onclick="PF('dlgPrototipo').show()" update=":frmPrototipo" styleClass="btnStyle"/>-->
                                                <h:panelGroup>
                                                    <p:commandButton id="btnQuitarEdif" value="Quitar" icon="ui-icon-trash" actionListener="#{fichaPredial.quitarEdif(edf)}" update=":tdatos:frmEdificaciones" styleClass="btnStyle"/>
                                                </h:panelGroup>
                                            </p:panelGrid>
                                        </p:dataGrid>
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                            <br/>
                            <div align="center">
                                <p:commandButton id="saveHeader" styleClass="btnStyle" style="text-align: center;" value="Guardar" rendered="#{fichaPredial.editable}"  actionListener="#{fichaPredial.guardarEspecTexEdif()}"/>
                                <!--<p:commandButton id="btnS6" styleClass="btnStyle" style="text-align: center;" value="Guardar" rendered="#{fichaPredial.editable}" actionListener="#{fichaPredial.openDialog}" process="@form" />-->
                            </div>
                            <br/>
                            <!--                            <p:panel id="pDetalle" style="width: 100%" toggleable="true">
                                                            <f:facet name="header">
                                                                <h:outputText value="Elementos constructivos"/>
                                                            </f:facet>
                                                            <div class="ui-datatable ui-widget" id="PEPE">
                                                                <div class="ui-datatable-tablewrapper" >
                                                                    <table id="tEspec" style="width: 100%;" role="grid" border="0" rules="groups" >
                                                                        <tbody class="ui-datatable-data ui-widget-content">
                                                                            <ui:repeat value="#{fichaPredial.fpreds}" var="e" varStatus="loop" id="fpreds">
                                                                                <tr role="row"  >
                                                                                    <td style="width: 7%;" role="gridcell">
                                                                                        <h:outputText value="#{e.clase}" style="width: 100%; font-weight: bolder;"/>
                                                                                    </td>
                                                                                    <td style="width: 10%" role="gridcell">
                                                                                        <h:outputText value="#{e.especificacion}" style="width: 100%; font-weight: bolder"/>
                                                                                    </td>
                                                                                    <ui:repeat value="#{e.detalle}" var="d" varStatus="varStatus" id="detalles">
                                                                                        <td style="width: 10%; border: 1px" role="gridcell" >
                                                                                                                                                            <p:selectBooleanCheckbox value="# {d.estatus}" style="height: 20px;border: solid 1px #0b4170; width: 50%" >
                                                                                                                                                                <p:ajax listener="# {fichaPredial.seleccionar(e, d)}" update="tdatos:frmEdificaciones:tvEdificaciones"/>
                                                                                                                                                            </p:selectBooleanCheckbox>
                                                                                                                                                            <p:selectBooleanCheckbox value="# {d.estatus}" style="height: 20px;border: solid 1px #0b4170; width: 100%" rendered="# {fichaPredial.provicincia eq 13 and fichaPredial.cantonRender eq 22}">
                                                                                                                                                                <p:ajax listener="# {fichaPredial.seleccionar(e, d)}" update="tdatos:frmEdificaciones:tvEdificaciones"/>
                                                                                                                                                            </p:selectBooleanCheckbox>
                                                                                            <p:inputText id="txtPorcentaje#{loop.index}#{varStatus.index}" onclick="changeValue(#{loop.index}, #{varStatus.index})" value="#{d.porcentaje}" style="width: 20%;" onkeypress="return isNumber(event)" maxlength="3">
                                                                                            </p:inputText>
                                                                                            <p:inputText  value="#{d.porcentaje}" style="width: 20%;" onkeypress="validateFloatValueAndFocusNext(event, '')" maxlength="3">
                                                                                            </p:inputText>

                                                                                        </td>
                                                                                    </ui:repeat>
                                                                                </tr>

                                                                            </ui:repeat>
                                                                        </tbody>
                                                                    </table>
                                                                    <script>
                                                                        function changeValue(loop, varStatus) {
                                                                            var id = 'tdatos:frmEdificaciones:tvEdificaciones:fpreds:' + loop + ':detalles:' + varStatus + ':txtPorcentaje'
                                                                            // var id = 'tdatos:frmEdificaciones:j_id_e4:' + loop + varStatus + ':j_id_ea:0:txtPorcentaje';
                                                                            var valor = document.getElementById(id).value;
                                                                            if (valor === '0') {
                                                                                document.getElementById(id).value = 100;
                                                                            }
                                                                        }
                                                                    </script>
                                                                </div>
                                                            </div>
                                                            <f:facet name="footer">
                                                                <div align="rigth">
                                                                </div>
                                                            </f:facet>
                                                        </p:panel>-->
                            <p:treeTable value="#{fichaPredial.nodoEdificaciones}" var="edf1"
                                         id="treeCaract" style="width: 100%; " rowStyleClass="height: 15px important;">
                                <p:column headerText="Categoria/Propiedades">
                                    <h:outputText value="#{edf1.nombre}" style="width: 90%;"/>
                                </p:column>
                                <p:column headerText="Propiedades">
                                    <h:outputText value="#{edf1.modelEdificaciones}" style="width: 90%;"/>
                                </p:column>
                                <p:columns value="#{edf1.modelEdificaciones}" headerText="Edificaciones" var="m1">
                                    <f:facet name="header">
                                        #{m1.headerText}
                                    </f:facet>
                                    <p:selectBooleanCheckbox value="#{m1.marcado}" rendered="#{!fichaPredial.mainConfig.fichaPredial.mostrarPorcentajeEdificacion}"/>
                                    <h:inputText value="#{m1.porcentaje}" rendered="#{fichaPredial.mainConfig.fichaPredial.mostrarPorcentajeEdificacion}" style="width: 90%;"/>
                                </p:columns>
                            </p:treeTable>
                        </p:tab>
                    </p:tabView>
                </h:form>
            </p:tab>
            <p:tab id="s8" title="7. Grafico y linderos del predio">
                <h:form id="frmLinderos">
                    <div align="right">
                        <p:remoteCommand name="rc7" actionListener="#{fichaPredial.guardarLinderos(fichaPredial.escritura)}" rendered="#{fichaPredial.editable}" />
                        <p:commandButton id="btnS7" value="Guardar" icon="ui-icon-disk"
                                         actionListener="#{fichaPredial.openDialog}" process="@form" action="#{fichaPredial.setRemotteCommand('rc7')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}" />
                    </div>
                    <p:fieldset legend="Colindantes" toggleable="true" collapsed="true">
                        <p:graphicImage alt="Ubicación Grafica" value="#{fichaPredial.getCroquis()}"   />
                    </p:fieldset>
                    <p:fieldset legend="Linderos Prediales" toggleable="true">
                        <p:panelGrid id="pngLid" columns="3" layout="grid" rendered="#{fichaPredial.editable}">
                            <h:outputText value="Orientación"/>
                            <h:outputText value="Colindante"/>
                            <h:outputText value="Agregar"/>

                            <p:selectOneMenu id="selectLind" value="#{fichaPredial.orientacion}" effect="fade" converter="entityConverter">
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.lindero_orientacion')}" var="or1" itemLabel="#{or1.valor}" itemValue="#{or1}"/>
                            </p:selectOneMenu>
                            <h:panelGroup>
                                <p:inputText id="lnore" value="#{fichaPredial.nombreLindero}"/>
                                <p:commandButton id="lind" value="Buscar"  actionListener="#{fichaPredial.listarPredios(1)}"
                                                 style="font-size: 15px; font-weight: bolder;" styleClass="btnStyle" title="Buscar Predio Colindante">
                                    <p:ajax event="dialogReturn" listener="#{fichaPredial.seleccionarPredio}" update=":tdatos:frmLinderos:pngLid, tdatos:frmLinderos:pLinderos" />
                                </p:commandButton>
                            </h:panelGroup>
                            <p:commandButton id="agregar" value="Agregar"  actionListener="#{fichaPredial.agregarLindero()}"
                                             update="tdatos:frmLinderos:pLinderos, tdatos:frmLinderos:pngLid" process="tdatos:frmLinderos:pLinderos, tdatos:frmLinderos:pngLid"/>
                        </p:panelGrid>
                        <p:dataTable id="pLinderos" value="#{fichaPredial.predio.predioCollection}"
                                     var="lp1" reflow="true" paginator="true" rows="6" paginatorPosition="top"
                                     style="width: 100%" paginatorAlwaysVisible="false"
                                     rowsPerPageTemplate="6, 12, 18" emptyMessage="No se encontraron registros">
                            <p:column headerText="Orientación">
                                <h:outputText value="#{lp1.orientacion.valor}"/>
                            </p:column>
                            <p:column headerText="Con">
                                <h:outputText value="#{lp1.predioColindante.claveCat}" rendered="#{lp1.predioColindante != null}"/>
                                <h:outputText value="#{lp1.colindante}" rendered="#{lp1.predioColindante == null}"/>
                            </p:column>
                            <p:column headerText="En">
                                <h:outputText value="#{lp1.predioColindante.areaSolar}"/>
                            </p:column>
                            <p:column headerText="Acción" style="text-align: center">
                                <p:commandLink actionListener="#{fichaPredial.eliminarLindero(lp1)}" rendered="#{fichaPredial.editable}"
                                               update=":tdatos:frmLinderos:pLinderos"  >
                                    <p:graphicImage value="/css/homeIconsImages/delete.png" width="25" height="25"/>
                                    <p:confirm icon="ui-icon-info" message="Esta seguro de quitar el lindero?"/>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>

                    </p:fieldset>
                </h:form>
            </p:tab>
            <p:tab id="s11" title="8. Responsables ">
                <h:form id="frmResponsables" >
                    <div align="right">
                        <p:remoteCommand name="rc8" actionListener="#{fichaPredial.saveResponsable(fichaPredial.actualizadorPredio, fichaPredial.fiscalizadorPredio, null)}" rendered="#{fichaPredial.editable}" />
                        <p:commandButton id="btnS8" value="Guardar"   icon="ui-icon-disk"
                                         actionListener="#{fichaPredial.openDialog}" process="@form" action="#{fichaPredial.setRemotteCommand('rc8')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}"/>
                    </div>
                    <div align="center">
                        <h:panelGrid columns="2">
                            <p:fieldset legend="ACTUALIZADOR PREDIAL" style="font-size: 13px;" id="actPredial">
                                <h:panelGrid columns="3">
                                    <h:outputText value="CI/RUC"/>
                                    <p:inputText value="#{fichaPredial.actualizadorPredio.ciRuc}" readonly="true" style="width: 270px;"/>
                                    <p:commandLink id="btnActualizadorResponsable" actionListener="#{fichaPredial.loadResponsablesPredio}" update="frmResponsableDialog" oncomplete="PF('dlgResponsables').show()" >
                                        <p:graphicImage value="/css/homeIconsImages/buscar.png" height="25" width="25"/>
                                    </p:commandLink>
                                </h:panelGrid>
                                <h:panelGrid columns="2">
                                    <p:outputLabel value="Nombres:" rendered="#{fichaPredial.actualizadorPredio.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.actualizadorPredio.nombres}" rendered="#{fichaPredial.actualizadorPredio.esPersona}" readonly="true" style="width: 250px;"/>
                                    <p:outputLabel value="Razón Social:" rendered="#{!fichaPredial.actualizadorPredio.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.actualizadorPredio.razonSocial}" rendered="#{!fichaPredial.actualizadorPredio.esPersona}" readonly="true" style="width: 250px;"/>
                                    <p:outputLabel value="Nombre Comercial:" rendered="#{!fichaPredial.actualizadorPredio.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.actualizadorPredio.nombreComercial}" rendered="#{!fichaPredial.actualizadorPredio.esPersona}" readonly="true" style="width: 250px;"/>
                                    <p:outputLabel value="Apellidos:" rendered="#{fichaPredial.actualizadorPredio.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.actualizadorPredio.apellidos}" rendered="#{fichaPredial.actualizadorPredio.esPersona}" readonly="true" style="width: 250px;"/>
                                </h:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="FISCALIZADOR PREDIAL" style="font-size: 13px;" id="actFisc">
                                <h:panelGrid columns="3">
                                    <h:outputText value="CI/RUC"/>
                                    <p:inputText value="#{fichaPredial.fiscalizadorPredio.ciRuc}" readonly="true" style="width: 270px;"/>
                                    <p:commandLink id="btnFiscalizadorResponsable" actionListener="#{fichaPredial.loadResponsablesPredio}" update="frmResponsableDialog" oncomplete="PF('dlgResponsables').show()" >
                                        <p:graphicImage value="/css/homeIconsImages/buscar.png" height="25" width="25"/>
                                    </p:commandLink>
                                </h:panelGrid>
                                <h:panelGrid columns="2">
                                    <p:outputLabel value="Nombres:" rendered="#{fichaPredial.fiscalizadorPredio.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.fiscalizadorPredio.nombres}" readonly="true" rendered="#{fichaPredial.fiscalizadorPredio.esPersona}" style="width: 250px;"/>
                                    <p:outputLabel value="Razón Social:" rendered="#{!fichaPredial.fiscalizadorPredio.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.fiscalizadorPredio.razonSocial}" readonly="true" rendered="#{!fichaPredial.fiscalizadorPredio.esPersona}" style="width: 250px;"/>
                                    <p:outputLabel value="Nombre Comercial:" rendered="#{!fichaPredial.fiscalizadorPredio.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.fiscalizadorPredio.nombreComercial}" rendered="#{!fichaPredial.fiscalizadorPredio.esPersona}" readonly="true" style="width: 250px;"/>
                                    <p:outputLabel value="Apellidos:" rendered="#{fichaPredial.fiscalizadorPredio.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.fiscalizadorPredio.apellidos}" rendered="#{fichaPredial.fiscalizadorPredio.esPersona}" readonly="true" style="width: 250px;"/>
                                </h:panelGrid>
                            </p:fieldset>

                        </h:panelGrid>
                    </div>
                </h:form>
            </p:tab>
            <p:tab id="s10" title="9. Adicionales">
                <p:tabView id="tadicionales">
                    <p:tab id="predioObservaciones" title="Observaciones e Informante">
                        <h:form id="frmObservaciones">
                            <div align="center">
                                <p:inputTextarea id="observaciones" value="#{fichaPredial.predio.observaciones}" style="width: 100%"/>
                                <br/>
                                <p:fieldset legend="INFORMANTE" style="font-size: 13px;" id="informante">
                                    <h:panelGrid columns="3">
                                        <h:outputText value="CI/RUC"/>
                                        <p:inputText value="#{fichaPredial.informante.ciRuc}" readonly="true" style="width: 270px;"/>
                                        <p:commandLink id="btnInformante" actionListener="#{fichaPredial.loadResponsablesPredio}" update="frmResponsableDialog" oncomplete="PF('dlgResponsables').show()" >
                                            <p:graphicImage value="/css/homeIconsImages/buscar.png" height="25" width="25"/>
                                        </p:commandLink>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <p:outputLabel value="Nombres:" rendered="#{fichaPredial.informante.esPersona}"/>
                                        <p:inputText value="#{fichaPredial.informante.nombres}" readonly="true" rendered="#{fichaPredial.informante.esPersona}" style="width: 250px;"/>
                                        <p:outputLabel value="Razón Social:" rendered="#{!fichaPredial.informante.esPersona}"/>
                                        <p:inputText value="#{fichaPredial.informante.razonSocial}" readonly="true" rendered="#{!fichaPredial.informante.esPersona}" style="width: 250px;"/>
                                        <p:outputLabel value="Nombre Comercial:" rendered="#{!fichaPredial.informante.esPersona}"/>
                                        <p:inputText value="#{fichaPredial.informante.nombreComercial}" rendered="#{!fichaPredial.informante.esPersona}" readonly="true" style="width: 250px;"/>
                                        <p:outputLabel value="Apellidos:" rendered="#{fichaPredial.informante.esPersona}"/>
                                        <p:inputText value="#{fichaPredial.informante.apellidos}" rendered="#{fichaPredial.informante.esPersona}" readonly="true" style="width: 250px;"/>
                                    </h:panelGrid>
                                </p:fieldset>
                            </div>
                            <br/>
                            <div align="center">
                                <p:remoteCommand name="rc9" actionListener="#{fichaPredial.guardarDatosPredio('ACTUALIZACION DE OBSERVACIONES', fichaPredial.informante)}" rendered="#{fichaPredial.editable}"/>
                                <p:commandButton id="btnS9" value="Guardar"  icon="ui-icon-disk"
                                                 actionListener="#{fichaPredial.openDialog}" process="@form" action="#{fichaPredial.setRemotteCommand('rc9')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}"/>
                            </div>
                        </h:form>
                    </p:tab>
                </p:tabView>
            </p:tab>
            <p:tab id="s12" title="10. Vivienda Censal">
                <h:form id="frmViviendaCensal">
                    <div align="right">
                        <p:remoteCommand name="rc10" actionListener="#{fichaPredial.saveCensalService()}" rendered="#{fichaPredial.editable}"/>
                        <p:commandButton id="btnS10" value="Guardar"   icon="ui-icon-disk" actionListener="#{fichaPredial.openDialog}"
                                         process="@form" action="#{fichaPredial.setRemotteCommand('rc10')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}"/>
                    </div>
                    <p:fieldset legend="Propiedad horizontal" toggleable="true" rendered="#{fichaPredial.predio.propiedadHorizontal}">
                        <p:fieldset legend="Caracteristicas" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="Clasificacion de Vivienda:" style="font-weight: bolder"/>
                                <p:selectOneMenu  value="#{fichaPredial.predio.clasificacionViviendaHorizontal}" style="width: 50%" converter="entityConverter">
                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                    <f:selectItems value="#{fichaPredial.getListado('predio.clasif_unidad_vivienda')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Tipo de Vivienda:" style="font-weight: bolder"/>
                                <p:selectOneMenu  value="#{fichaPredial.predio.tipoViviendaHorizontal}" style="width: 50%" >
                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                    <f:selectItem itemLabel="Particular" itemValue="#{true}"/>
                                    <f:selectItem itemLabel="Colectiva" itemValue="#{false}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Condicion de Ocupacion de la Vivienda:" style="font-weight: bolder"/>
                                <p:selectOneMenu  value="#{fichaPredial.predio.ocupacionViviendaHorizontal}" style="width: 50%">
                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                    <f:selectItem itemLabel="Ocupada" itemValue="#{true}"/>
                                    <f:selectItem itemLabel="Desocupada" itemValue="#{false}"/>
                                </p:selectOneMenu>

                            </p:panelGrid>
                        </p:fieldset>
                        <div align="center">

                            <p:fieldset legend="JEFE DEL HOGAR" style="font-size: 13px;">
                                <p:panelGrid columns="3">
                                    <h:outputText value="CI/RUC"/>
                                    <p:inputText value="#{fichaPredial.enteHorizontal.ciRuc}" readonly="true" style="width: 270px;"/>
                                    <p:commandLink id="btnEnteHorizontal" actionListener="#{fichaPredial.loadResponsablesPredio}" update="frmResponsableDialog" oncomplete="PF('dlgResponsables').show()" >
                                        <p:graphicImage value="/css/homeIconsImages/buscar.png" height="25" width="25"/>
                                    </p:commandLink>
                                </p:panelGrid>
                                <p:panelGrid columns="2">
                                    <p:outputLabel value="Tipo de Documento:"/>
                                    <p:inputText value="Cedula de Identidad" readonly="true" rendered="#{fichaPredial.enteHorizontal.esPersona}" style="width: 250px;"/>
                                    <p:inputText value="Ruc" readonly="true" rendered="#{!fichaPredial.enteHorizontal.esPersona}" style="width: 250px;"/>
                                    <p:outputLabel value="Nombres:" rendered="#{fichaPredial.enteHorizontal.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.enteHorizontal.nombres}" readonly="true" rendered="#{fichaPredial.enteHorizontal.esPersona}" style="width: 250px;"/>
                                    <p:outputLabel value="Razón Social:" rendered="#{!fichaPredial.enteHorizontal.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.enteHorizontal.razonSocial}" readonly="true" rendered="#{!fichaPredial.enteHorizontal.esPersona}" style="width: 250px;"/>
                                    <p:outputLabel value="Nombre Comercial:" rendered="#{!fichaPredial.enteHorizontal.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.enteHorizontal.nombreComercial}" rendered="#{!fichaPredial.enteHorizontal.esPersona}" readonly="true" style="width: 250px;"/>
                                    <p:outputLabel value="Apellidos:" rendered="#{fichaPredial.enteHorizontal.esPersona}"/>
                                    <p:inputText value="#{fichaPredial.enteHorizontal.apellidos}" rendered="#{fichaPredial.enteHorizontal.esPersona}" readonly="true" style="width: 250px;"/>
                                </p:panelGrid>
                            </p:fieldset>

                        </div>
                        <p:fieldset legend="Areas" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="Alicuota terreno:" style="font-weight: bolder"/>
                                <pe:inputNumber value="#{fichaPredial.predio.alicuotaUtil}" decimalPlaces="4"/>
                                <h:outputText value="Alicuota construccion:" style="font-weight: bolder"/>
                                <pe:inputNumber id="alicConst" value="#{fichaPredial.predio.alicuotaConst}" decimalPlaces="4"/>
                                <h:outputText value="Area declarada const:" style="font-weight: bolder"/>
                                <pe:inputNumber id="aDecConst" value="#{fichaPredial.predio.areaDeclaradaConst}" decimalPlaces="4"/>
                                <h:outputText value="Unidad de Medida" style="font-weight: bolder; width: 80%"/>
                                <p:selectOneMenu  value="#{fichaPredial.predio.unidadMedida}" style="width: 50%" converter="entityConverter">
                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                    <f:selectItems value="#{fichaPredial.getListado('edif.unidad_medida')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:fieldset>
                    </p:fieldset>

                    <p:fieldset legend="Instalaciones" toggleable="true">
                        <p:fieldset legend="Habitaciones" toggleable="true">
                            <p:panelGrid columns="4" layout="grid" style="width: 100%">
                                <h:outputText value="Tenencia de Vivienda:" style="font-weight: bolder"/>
                                <p:selectOneMenu id="tenVivienda" value="#{fichaPredial.predio.tenenciaVivienda}" effect="fade" converter="entityConverter">
                                    <f:selectItem itemLabel="Seleccionar..." itemValue=""/>
                                    <f:selectItems value="#{fichaPredial.getListado('predio.tenencia_vivienda')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Numero de Habitantes:" style="font-weight: bolder"/>
                                <pe:inputNumber  value="#{fichaPredial.predio.habitantes}" decimalPlaces="0"/>
                                <h:outputText value="Numero de Habitaciones  (Excluye: baño, cocina y negocio) :" style="font-weight: bolder"/>
                                <pe:inputNumber id="numHabitaciones" value="#{fichaPredial.predio.numHabitaciones}" decimalPlaces="0"/>
                                <h:outputText value="Numero de Dormitorios:" style="font-weight: bolder"/>
                                <pe:inputNumber id="numDormitorios" value="#{fichaPredial.predio.numDormitorios}" decimalPlaces="0"/>
                                <h:outputText value="Numero de Hogares :" style="font-weight: bolder"/>
                                <pe:inputNumber id="numHogares" value="#{fichaPredial.predio.numHogares}" decimalPlaces="0"/>
                                <h:outputText value="Numero de Celulares :" style="font-weight: bolder"/>
                                <pe:inputNumber id="numCelus" value="#{fichaPredial.predio.numCelulares}" decimalPlaces="0"/>
                                <h:outputText value="Espacios Para Bañarse o Duchas :" style="font-weight: bolder"/>
                                <pe:inputNumber id="numEspaciosDuchas" value="#{fichaPredial.predio.numEspaciosBanios}" decimalPlaces="0"/>

                            </p:panelGrid>
                        </p:fieldset>
                    </p:fieldset>
                    <p:fieldset legend="Servicios" toggleable="true">
                        <p:panelGrid columns="4" layout="grid" style="width: 100%">
                            <h:outputText value="Abastecimiento de Agua :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="abasteAgua" value="#{fichaPredial.servicios.abastAgua}" effect="fade" converter="entityConverter">

                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.abastecimiento_agua')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Medio de Abastecimiento de Agua :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="medioabasteAgua" value="#{fichaPredial.servicios.abastAguaRecibe}" effect="fade" converter="entityConverter">

                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.medio_abas_agua')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Abaste electrico :" style="font-weight: bolder"/>
                            <p:selectOneMenu id="abasteElectrico" value="#{fichaPredial.servicios.abasteElectrico}" style="width: 90%" effect="fade" converter="entityConverter">

                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.abaste_electrico')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Eliminacion Excretas:" style="font-weight: bolder"/>
                            <p:selectOneMenu id="alcSanitario" value="#{fichaPredial.servicios.evacAguasServ}" effect="fade" converter="entityConverter">

                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.evac_aguas_serv')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Eliminacion de basura:" style="font-weight: bolder"/>
                            <p:selectOneMenu  value="#{fichaPredial.servicios.recolBasura}" effect="fade" converter="entityConverter">

                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                <f:selectItems value="#{fichaPredial.getListado('predio.recol_basura_medio')}" var="loc" itemLabel="#{loc.valor}" itemValue="#{loc}"/>
                            </p:selectOneMenu>

                        </p:panelGrid>

                    </p:fieldset>

                </h:form>
            </p:tab>
        </p:accordionPanel>

        <p:dialog id="dlgAnexos" widgetVar="dlgAnexos" header="Ingrese datos de la edificacion o anexo" width="60%" height="400" resizable="true" responsive="true" closable="true" closeOnEscape="true">
            <h:form id="frmAnexos">
                <p:panelGrid id="pgAnexos" layout="grid" columns="2">
                    <h:outputText value="(*)Vida util" style="font-weight: bolder; width: 80%"/>
                    <p:inputText id="vutil" value="#{fichaPredial.edif.vidautil}" type="number" maxlength="6" />
                    <h:outputText value="(*)Area construccion censo" style="font-weight: bolder; width: 80%"/>
                    <pe:inputNumber id="accenso" value="#{fichaPredial.edif.areaConsCenso}" minValue="0" decimalPlaces="2"  />
                    <h:outputText value="En construcción 30-60-80%" style="font-weight: bolder; width: 80%"/>
                    <p:inputText id="pconst" value="#{fichaPredial.edif.enConstruccionPorc}" type="number" maxlength="3"/>
                    <h:outputText value="(*)Año de construcción" style="font-weight: bolder; width: 80%"/>
                    <p:inputText id="aconst" value="#{fichaPredial.edif.anioCons}" type="number" maxlength="6"  />
                    <h:outputText value="(*)Estado de conservación" style="font-weight: bolder; width: 80%"/>
                    <p:selectOneMenu id="estConservacion" value="#{fichaPredial.edif.estadoConservacion}" style="width: 50%" converter="entityConverter"  required="true">
                        <f:selectItems value="#{fichaPredial.getListado('edif.estado_cons')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                    </p:selectOneMenu>
                    <h:outputText value="(*)Categoria de construcción" style="font-weight: bolder; width: 80%"/>
                    <p:selectOneMenu id="condicionEdifx" value="#{fichaPredial.edif.categoria}" style="width: 50%" converter="entityConverter">
                        <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                        <f:selectItems value="#{fichaPredial.categroriasConst}" var="ccx" itemLabel="#{ccx.descripcion}" itemValue="#{ccx}"/>
                    </p:selectOneMenu>
                    <h:outputText value="(*)Esta rentado" style="font-weight: bolder; width: 80%"/>
                    <p:selectBooleanButton id="edfRent" offLabel="No" onLabel="Si" value="#{fichaPredial.edif.estaRentado}"/>
                    <h:outputText value="(*)No. Pisos" style="font-weight: bolder; width: 80%"/>
                    <p:inputText type="number" value="#{fichaPredial.edif.numPisos}" style="width: 80%" maxlength="1" />
                    <h:outputText value="Valor Cultural" style="font-weight: bolder; width: 80%"/>
                    <p:selectOneMenu  value="#{fichaPredial.edif.valorCultural}" style="width: 50%" converter="entityConverter"  >
                        <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                        <f:selectItems value="#{fichaPredial.getListado('edif.valor_cultural')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                    </p:selectOneMenu>
                    <h:outputText value="Uso de Construccion del Piso" style="font-weight: bolder; width: 80%"/>
                    <p:selectOneMenu  value="#{fichaPredial.edif.usoConstructivoPiso}" style="width: 50%" effect="fade" converter="entityConverter" filter="true" filterMatchMode="contains">
                        <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                        <f:selectItems value="#{fichaPredial.getListado('edif.uso_constructivo_piso')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                    </p:selectOneMenu>
                    <f:facet name="footer">
                        <div align="center">
                            <p:commandButton id="btnGuardarAnexos" value="Guardar"  oncomplete="PF('dlgAnexos').hide()" actionListener="#{fichaPredial.guardarEdificacion()}"  update=":tdatos:frmEdificaciones:tvEdificaciones" rendered="#{fichaPredial.editable}"/>
<!--                            <p:remoteCommand name="rc6"   oncomplete="PF('dlgAnexos').hide()" actionListener="#{fichaPredial.guardarEdificacion()}" update=":tdatos:frmEdificaciones:tvEdificaciones" rendered="#{fichaPredial.editable}"/>
                            <p:commandButton id="btnGuardarAnexo" value="Guardar" actionListener="#{fichaPredial.openDialog}" process="@form" ajax="false" action="#{fichaPredial.setRemotteCommand('rc6')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}"/>-->
                        </div>
                    </f:facet>
                </p:panelGrid>
            </h:form>
        </p:dialog>
        <p:dialog id="dlgSubida" widgetVar="dlgSubida" appendTo="@(body)" modal="true" header="Carga de fotos" width="65%" height="500" closable="true" closeOnEscape="true">
            <h:form id="frmSubFotos">
                <p:fileUpload fileUploadListener="#{fichaPredial.handleFileUpload}"
                              multiple="true"
                              mode="advanced" update="tdatos:frmEdificaciones"
                              uploadLabel="Subir"
                              cancelLabel="Cancelar"
                              label="Seleccionar"  immediate="true"
                              sizeLimit="350000000"
                              sequential="true"
                              fileLimit="10" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
            </h:form>
        </p:dialog>
        <p:dialog id="dlgFoto" widgetVar="dlgFoto" appendTo="@(body)" modal="true" header="Foto: #{fichaPredial.foto.nombre}" width="45%" height="80%" closable="true" closeOnEscape="true">
            <h:form id="frmFotos">
                <!--<p:growl autoUpdate="true" showDetail="true"/>-->
                <div align="center">
                    <p:panel id="pFotos" style="width: 100%">
                        <p:graphicImage id="myImage" url="/FotosServlet?fotoId=#{fichaPredial.foto.id}" alt="Descripcion: #{fichaPredial.foto.descripcion}" title="#{fichaPredial.foto.nombre}" style="width: 100%; height: 400px"/>
                        <pe:imageRotateAndResize id="rotateAndResize" for="myImage" widgetVar="rotateAndResizeWidget"/>
                        <f:facet name="footer">
                            <div align="center">
                                <p:panelGrid columns="5" layout="grid">
                                    <p:commandButton icon="ui-icon-arrowreturnthick-1-w" onclick="PF('rotateAndResizeWidget').rotateLeft(90);
                                            return
                                            false;"/>
                                    <p:commandButton icon="ui-icon-arrowreturnthick-1-e" onclick="PF('rotateAndResizeWidget').rotateRight(90);
                                            return
                                            false;"/>
                                    <p:commandButton icon="ui-icon-zoomin" onclick="PF('rotateAndResizeWidget').scale(1.05);
                                            return false;"/>
                                    <p:commandButton icon="ui-icon-zoomout" onclick="PF('rotateAndResizeWidget').scale(0.95);
                                            return false;"/>
                                    <p:commandButton id="btnElimFoto" icon="ui-icon-trash" title="Eliminar foto" update="tdatos:frmEdificaciones:tvEdificaciones" actionListener="#{fichaPredial.eliminarFoto()}" oncomplete="PF('dlgFoto').hide()"/>
                                </p:panelGrid>
                            </div>
                        </f:facet>
                    </p:panel>
                </div>
            </h:form>
        </p:dialog>
        <dlg:infoFichaReg id="d" movimiento="#{fichaPredial.movimiento}" modelo="#{fichaPredial.modelo}"/>
        <p:dialog id="dlgPrototipo" widgetVar="dlgPrototipo" header="Seleccione El prototipo arquitectonico" appendTo="@(body)" modal="true" closable="true" closeOnEscape="true">
            <h:form id="frmPrototipo">
                <p:panel id="pProto" style="width: 100%">
                    <p:panelGrid id="pgProto" layout="grid" columns="2" style="width: 100%">
                        <h:outputText value="Tipo :"/>
                        <p:selectOneMenu id="tipoprototipo" value="#{fichaPredial.edif.tipoPrototipo}" style="width: 100%" converter="entityConverter" label="Tipo de prototipo">
                            <p:ajax listener="#{fichaPredial.referenciarTipo(fichaPredial.edif.tipoPrototipo)}" update="prototipo" />
                            <f:selectItem itemLabel="Seleccione un tipo de prototipo arquitectonico" itemValue="#{null}"/>
                            <f:selectItems value="#{fichaPredial.getListado('edif.tipo_prototipo')}" var="econst" itemLabel="#{econst.valor}" itemValue="#{econst}"/>
                        </p:selectOneMenu>
                        <h:outputText value="Prototipo :"/>
                        <p:selectOneMenu id="prototipo" value="#{fichaPredial.edif.prototipo}" style="width: 100%" converter="entityConverter" label="Prototipo">
                            <f:selectItem itemLabel="Seleccione un prototipo arquitectonico" itemValue="#{null}"/>
                            <f:selectItems value="#{fichaPredial.prototipos}" var="ec" itemLabel="#{ec.valor}" itemValue="#{ec}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>
                    <f:facet name="footer">
                        <p:commandButton value="Referenciar" actionListener="#{fichaPredial.getDatosPrototipos()}" update=":tdatos:frmEdificaciones:tvEdificaciones" oncomplete="PF('dlgPrototipo').hide()"/>
                    </f:facet>
                </p:panel>
            </h:form>
        </p:dialog>
        <p:dialog id="dlgPisos" widgetVar="dlgPisos" appendTo="@(body)" header="Detalle de pisos" modal="true" closable="true" closeOnEscape="true" width="50%">
            <h:form id="frmPisos">
                <p:panel header="Doble clic en cada celda, para actualizar el valor del piso" style="width: 100%">
                    <p:dataTable id="dtPisos" value="#{fichaPredial.pisos}" var="p" paginator="true" rows="10" style="width: 100%" editable="true" editMode="cell" paginatorPosition="top">
                        <p:ajax event="cellEdit" listener="#{fichaPredial.onCellEdit}"/>
                        <p:column headerText="No. Piso">
                            <h:outputText value="#{p.piso}"/>
                        </p:column>
                        <p:column headerText="Area del piso">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{p.area}" /></f:facet>
                                <f:facet name="input"><pe:inputNumber value="#{p.area}" style="width:96%" decimalPlaces="4" required="true" requiredMessage="El area del piso es obligatoria"/></f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="Periodo Construccion">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{p.anio}" /></f:facet>
                                <f:facet name="input"><p:inputText value="#{p.anio}" type="number" maxlength="4" style="width:96%" required="true" requiredMessage="El año de construccion del piso es obligatorio"/></f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="Estructura">
                            <p:cellEditor>
                                <f:facet name="output"><p:selectBooleanCheckbox value="#{p.estructura}"/> </f:facet>
                                <f:facet name="input"><p:selectBooleanCheckbox value="#{p.estructura}" style="width:96%"/></f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="Acabados">
                            <p:cellEditor>
                                <f:facet name="output"><p:selectBooleanCheckbox value="#{p.acabados}"/> </f:facet>
                                <f:facet name="input"><p:selectBooleanCheckbox value="#{p.acabados}" style="width:96%"/></f:facet>
                            </p:cellEditor>
                        </p:column>
                    </p:dataTable>
                    <div align="center">
                        <p:commandButton id="btnPisos" value="Guardar" actionListener="#{fichaPredial.guardarDetallePisos()}" oncomplete="PF('dlgPisos').hide()" />
                    </div>
                </p:panel>
            </h:form>
        </p:dialog>
        <p:dialog id="dlgEscritura" widgetVar="dlgEscritura" header="Registro de Escrituras" modal="true" width="40%" height="550" closable="true" closeOnEscape="false" resizable="true">
            <h:form id="frmDlgEscr">
                <div align="center">
                    <p:panelGrid id="pgPagre" style="width: 80%" >
                        <p:row>
                            <p:column>
                                <h:outputText value="(*) Canton:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:selectOneMenu id="cmbCanton" value="#{fichaPredial.canton}" effect="fade" converter="entityConverter" filter="true" filterMatchMode="contains">
                                    <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                    <f:selectItems value="#{fichaPredial.cantones}" var="cx" itemLabel="#{cx.nombre}" itemValue="#{cx}"/>
                                </p:selectOneMenu>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="Estado:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:selectOneMenu id="estadoEscritura" value="#{fichaPredial.escr.estado}" effect="fade" >
                                    <f:selectItem itemLabel="Activo" itemValue="A"/>
                                    <f:selectItem itemLabel="Inactivo..." itemValue="I"/>
                                </p:selectOneMenu>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="Fecha Escritura:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:calendar value="#{fichaPredial.escr.fecEscritura}" placeholder="DÍA-MES-AÑO" maxdate="sysdate"
                                            pattern="dd-MM-yyyy" mask="true" />
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="(*) Fecha Inscripcion:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:calendar value="#{fichaPredial.escr.fecInscripcion}" placeholder="DÍA-MES-AÑO" maxdate="sysdate"
                                            pattern="dd-MM-yyyy" mask="true" />
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="(*) Protocolización Celebrado Ante:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:selectOneMenu id="tipoProtclz" value="#{fichaPredial.escr.tipoProtocolizacion}" style="width: 100%" converter="entityConverter" label="Tipo de Protocolización Celebrado Ante">
                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                    <f:selectItems value="#{fichaPredial.getListado('predio.tipo_protocolizacion')}" var="tipt1" itemLabel="#{tipt1.valor}" itemValue="#{tipt1}"/>
                                </p:selectOneMenu>
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <h:outputText value="(*) No. Repertorio:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:inputText type="number" id="repertorio"  style="width: 100%" value="#{fichaPredial.escr.numRepertorio}"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="(*) No. Registro:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:inputText type="number" id="numRegistro"  style="width: 100%" value="#{fichaPredial.escr.numRegistro}"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="(*) No. Notaria:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:inputText type="number" id="notaria"  style="width: 100%" value="#{fichaPredial.escr.notaria}"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="(*) Area de Solar:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:inputText type="number" id="area"  style="width: 100%" value="#{fichaPredial.escr.areaSolar}"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="Unidad del Area:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:inputText type="number"  style="width: 100%" value="# {fichaPredial.escr.unidadArea}"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="Folio Desde:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:inputText type="number" id="folioDesde"  style="width: 100%" value="#{fichaPredial.escr.folioDesde}"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="Folio Hasta:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:inputText type="number" id="folioHasta"  style="width: 100%" value="#{fichaPredial.escr.folioHasta}"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="Tipo Dominio:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:selectOneMenu value="#{fichaPredial.escr.traslDom}" effect="fade" converter="entityConverter" >
                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}"/>
                                    <f:selectItems value="#{fichaPredial.dominios}" var="td1" itemLabel="#{td1.nombre}" itemValue="#{td1}"/>
                                </p:selectOneMenu>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="Precio de Compra:  " style="font-weight: bolder;"/>
                            </p:column>
                            <p:column>
                                <p:inputText type="decimal" id="precioComp"  style="width: 100%" value="#{fichaPredial.escr.precioCompra}"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:outputText value="Coopropietario:  " style="font-weight: bolder;"/>
                                <p:spacer width="5"/>
                                <p:selectBooleanCheckbox value="#{fichaPredial.coopropietarios}">
                                    <p:ajax update="escrProp"/>
                                </p:selectBooleanCheckbox>
                            </p:column>
                            <p:column>
                                <p:selectOneMenu id="escrProp" value="#{fichaPredial.escr.propietario}" converter="entityConverter" disabled="#{!fichaPredial.coopropietarios}">
                                    <f:selectItem itemValue="#{null}" itemLabel="Seleccione Propietario..."/>
                                    <f:selectItems value="#{fichaPredial.propietarios}" var="pp1" itemLabel="#{pp1.ente.nombreCompleto}" itemValue="#{pp1}"/>
                                </p:selectOneMenu>
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                    <div align="center">
                        <p:commandButton value="Guardar" actionListener="#{fichaPredial.saveEscritura()}" oncomplete="PF('dlgEscritura').hide()" update=":tdatos:frmEscrituras"/>
                        <!--<p:commandButton id="btnS5" value="Guardar"  actionListener="# {fichaPredial.openDialog}" oncomplete="PF('dlgEscritura').hide()" update=":tdatos:frmEscrituras" process="@form" />-->
                    </div>
                </div>
            </h:form>
        </p:dialog>
        <p:dialog id="dlgSolicitante" widgetVar="dlgResponsables" header="Listado de contribuyentes"
                  height="500" width="900" responsive="true" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmResponsableDialog">
                <p:panelGrid styleClass="noBorder" style="width: 100%" >
                    <p:panelGrid columns="2" style="margin-bottom: 15px;">
                        <p:outputLabel value="Tipo Persona:" style="font-weight: bolder"/>
                        <p:selectOneMenu value="#{fichaPredial.tipoEnte}" style="width: 160px;">
                            <f:selectItem itemLabel="Natural" itemValue="1" />
                            <f:selectItem itemLabel="Jurídica" itemValue="2" />
                            <p:ajax listener="#{fichaPredial.cambioTipoPersona()}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>


                </p:panelGrid>
                <p:dataTable id="dtresponsable" reflow="true" paginator="true" lazy="true" rows="20" rowsPerPageTemplate="20,50,100" filterEvent="enter"
                             paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             value="#{fichaPredial.responsablesLazy}" var="res1" emptyMessage="No se encontró ningún Item">
                    <p:column headerText="C.I./R.U.C." style="text-align: center; width: 20%;" filterBy="#{res1.ciRuc}" filterStyle="width: 20%;">
                        <h:outputText value="#{res1.ciRuc}" style="text-align: center; font-size: 12px"/>
                    </p:column>
                    <p:column headerText="Nombres" style="text-align: center; width: 20%;" filterBy="#{res1.nombres}" filterStyle="width: 20%;"
                              rendered="#{fichaPredial.esPersona}">
                        <h:outputText value="#{res1.nombres}"/>
                    </p:column>
                    <p:column headerText="Apellidos" style="text-align: center; width: 20%;"  filterBy="#{res1.apellidos}" filterStyle="width: 20%;"
                              rendered="#{fichaPredial.esPersona}">
                        <h:outputText value="#{res1.apellidos}"/>
                    </p:column>
                    <p:column headerText="Razón Social" style="text-align: center; width: 20%;"  filterBy="#{res1.razonSocial}" filterStyle="width: 20%;"
                              rendered="#{!fichaPredial.esPersona}">
                        <h:outputText value="#{res1.razonSocial}"/>
                    </p:column>
                    <p:column headerText="Nombre Comercial" style="text-align: center; width: 20%;"  filterBy="#{res1.nombreComercial}" filterStyle="width: 20%;"
                              rendered="#{!fichaPredial.esPersona}">
                        <h:outputText value="#{res1.nombreComercial}"/>
                    </p:column>
                    <p:column headerText="Opciones" style="text-align: center;width: 10%">
                        <p:commandButton icon="ui-icon-plus" oncomplete="PF('dlgResponsables').hide()"
                                         actionListener="#{fichaPredial.selectedResponsable(res1)}" update=":tdatos:frmResponsables, :tdatos:frmViviendaCensal, :tdatos:tadicionales:frmObservaciones:informante">
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>
        <p:dialog widgetVar="dlgSubirDocumento" header="Confirmación"
                  width="450" minHeight="450" responsive="true" closable="true" closeOnEscape="true"
                  modal="true" appendTo="@(body)" >

            <h:form id="frmSubirDocumentosDialog">
                <p:panel style="height: 100%">
                    <p:outputLabel value="Debe subir un documento de respaldo antes de continuar?"
                                   style="font-size: 18px; font-weight: bold;" rendered="#{fichaPredial.mainConfig.fichaPredial.renderDialogUploadDocument}" />
                    <br/><br/>
                    <p:fileUpload fileUploadListener="#{fichaPredial.handleFileDocumentBySave}" dragDropSupport="false"
                                  multiple="false" mode="advanced"
                                  uploadLabel="Subir" cancelLabel="Cancelar" label="Seleccionar"
                                  skinSimple="true" sizeLimit="350000000"
                                  sequential="true" fileLimit="10" allowTypes="/(\.|\/)(pdf)$/"
                                  rendered="#{fichaPredial.mainConfig.fichaPredial.renderDialogUploadDocument}"/>

                    <p:outputLabel value="Esta seguro de guardar los cambios realizados?"
                                   style="font-size: 18px; font-weight: bold;" rendered="#{!fichaPredial.mainConfig.fichaPredial.renderDialogUploadDocument}" />
                    <f:facet name="footer">
                        <center>
                            <p:commandButton value="Aceptar" oncomplete="PF('dlgSubirDocumento').hide()"
                                             actionListener="#{fichaPredial.processMethod()}"
                                             onclick="#{fichaPredial.remotteCommand}()" />
                            <p:commandButton value="Cancelar" oncomplete="PF('dlgSubirDocumento').hide()" />
                        </center>
                    </f:facet>
                </p:panel>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
